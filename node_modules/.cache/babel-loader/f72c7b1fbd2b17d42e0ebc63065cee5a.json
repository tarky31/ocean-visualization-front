{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport { getCurrentInstance, watch } from 'vue';\nimport '../../../../utils/index.mjs';\nimport { parseWidth, parseMinWidth } from '../util.mjs';\nimport { hasOwn } from '@vue/shared';\n\nfunction useWatcher(owner, props_) {\n  var instance = getCurrentInstance();\n\n  var registerComplexWatchers = function registerComplexWatchers() {\n    var props = [\"fixed\"];\n    var aliases = {\n      realWidth: \"width\",\n      realMinWidth: \"minWidth\"\n    };\n    var allAliases = props.reduce(function (prev, cur) {\n      prev[cur] = cur;\n      return prev;\n    }, aliases);\n    Object.keys(allAliases).forEach(function (key) {\n      var columnKey = aliases[key];\n\n      if (hasOwn(props_, columnKey)) {\n        watch(function () {\n          return props_[columnKey];\n        }, function (newVal) {\n          var value = newVal;\n\n          if (columnKey === \"width\" && key === \"realWidth\") {\n            value = parseWidth(newVal);\n          }\n\n          if (columnKey === \"minWidth\" && key === \"realMinWidth\") {\n            value = parseMinWidth(newVal);\n          }\n\n          instance.columnConfig.value[columnKey] = value;\n          instance.columnConfig.value[key] = value;\n          var updateColumns = columnKey === \"fixed\";\n          owner.value.store.scheduleLayout(updateColumns);\n        });\n      }\n    });\n  };\n\n  var registerNormalWatchers = function registerNormalWatchers() {\n    var props = [\"label\", \"filters\", \"filterMultiple\", \"sortable\", \"index\", \"formatter\", \"className\", \"labelClassName\", \"showOverflowTooltip\"];\n    var aliases = {\n      property: \"prop\",\n      align: \"realAlign\",\n      headerAlign: \"realHeaderAlign\"\n    };\n    var allAliases = props.reduce(function (prev, cur) {\n      prev[cur] = cur;\n      return prev;\n    }, aliases);\n    Object.keys(allAliases).forEach(function (key) {\n      var columnKey = aliases[key];\n\n      if (hasOwn(props_, columnKey)) {\n        watch(function () {\n          return props_[columnKey];\n        }, function (newVal) {\n          instance.columnConfig.value[key] = newVal;\n        });\n      }\n    });\n  };\n\n  return {\n    registerComplexWatchers: registerComplexWatchers,\n    registerNormalWatchers: registerNormalWatchers\n  };\n}\n\nexport { useWatcher as default };","map":{"version":3,"mappings":";;;;;;;;AAGA,SAASA,UAAT,CAAoBC,KAApB,EAA2BC,MAA3B,EAAmC;AACjC,MAAMC,QAAQ,GAAGC,kBAAkB,EAAnC;;AACA,MAAMC,uBAAuB,GAAG,SAA1BA,uBAA0B,GAAM;AACpC,QAAMC,KAAK,GAAG,CAAC,OAAD,CAAd;AACA,QAAMC,OAAO,GAAG;AACdC,eAAS,EAAE,OADG;AAEdC,kBAAY,EAAE;AAFA,KAAhB;AAIA,QAAMC,UAAU,GAAGJ,KAAK,CAACK,MAAN,CAAa,UAACC,IAAD,EAAOC,GAAP,EAAe;AAC7CD,UAAI,CAACC,GAAD,CAAJ,GAAYA,GAAZ;AACA,aAAOD,IAAP;AACD,KAHkB,EAGhBL,OAHgB,CAAnB;AAIAO,UAAM,CAACC,IAAP,CAAYL,UAAZ,EAAwBM,OAAxB,CAAgC,UAACC,GAAD,EAAS;AACvC,UAAMC,SAAS,GAAGX,OAAO,CAACU,GAAD,CAAzB;;AACA,UAAIE,MAAM,CAACjB,MAAD,EAASgB,SAAT,CAAV,EAA+B;AAC7BE,aAAK,CAAC;AAAA,iBAAMlB,MAAM,CAACgB,SAAD,CAAZ;AAAA,SAAD,EAA0B,UAACG,MAAD,EAAY;AACzC,cAAIC,KAAK,GAAGD,MAAZ;;AACA,cAAIH,SAAS,KAAK,OAAd,IAAyBD,GAAG,KAAK,WAArC,EAAkD;AAChDK,iBAAK,GAAGC,UAAU,CAACF,MAAD,CAAlB;AACD;;AACD,cAAIH,SAAS,KAAK,UAAd,IAA4BD,GAAG,KAAK,cAAxC,EAAwD;AACtDK,iBAAK,GAAGE,aAAa,CAACH,MAAD,CAArB;AACD;;AACDlB,kBAAQ,CAACsB,YAAT,CAAsBH,KAAtB,CAA4BJ,SAA5B,IAAyCI,KAAzC;AACAnB,kBAAQ,CAACsB,YAAT,CAAsBH,KAAtB,CAA4BL,GAA5B,IAAmCK,KAAnC;AACA,cAAMI,aAAa,GAAGR,SAAS,KAAK,OAApC;AACAjB,eAAK,CAACqB,KAAN,CAAYK,KAAZ,CAAkBC,cAAlB,CAAiCF,aAAjC;AACD,SAZI,CAAL;AAaD;AACF,KAjBD;AAkBD,GA5BD;;AA6BA,MAAMG,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAM;AACnC,QAAMvB,KAAK,GAAG,CACZ,OADY,EAEZ,SAFY,EAGZ,gBAHY,EAIZ,UAJY,EAKZ,OALY,EAMZ,WANY,EAOZ,WAPY,EAQZ,gBARY,EASZ,qBATY,CAAd;AAWA,QAAMC,OAAO,GAAG;AACduB,cAAQ,EAAE,MADI;AAEdC,WAAK,EAAE,WAFO;AAGdC,iBAAW,EAAE;AAHC,KAAhB;AAKA,QAAMtB,UAAU,GAAGJ,KAAK,CAACK,MAAN,CAAa,UAACC,IAAD,EAAOC,GAAP,EAAe;AAC7CD,UAAI,CAACC,GAAD,CAAJ,GAAYA,GAAZ;AACA,aAAOD,IAAP;AACD,KAHkB,EAGhBL,OAHgB,CAAnB;AAIAO,UAAM,CAACC,IAAP,CAAYL,UAAZ,EAAwBM,OAAxB,CAAgC,UAACC,GAAD,EAAS;AACvC,UAAMC,SAAS,GAAGX,OAAO,CAACU,GAAD,CAAzB;;AACA,UAAIE,MAAM,CAACjB,MAAD,EAASgB,SAAT,CAAV,EAA+B;AAC7BE,aAAK,CAAC;AAAA,iBAAMlB,MAAM,CAACgB,SAAD,CAAZ;AAAA,SAAD,EAA0B,UAACG,MAAD,EAAY;AACzClB,kBAAQ,CAACsB,YAAT,CAAsBH,KAAtB,CAA4BL,GAA5B,IAAmCI,MAAnC;AACD,SAFI,CAAL;AAGD;AACF,KAPD;AAQD,GA7BD;;AA8BA,SAAO;AACLhB,2BAAuB,EAAvBA,uBADK;AAELwB,0BAAsB,EAAtBA;AAFK,GAAP;AAIF","names":["useWatcher","owner","props_","instance","getCurrentInstance","registerComplexWatchers","props","aliases","realWidth","realMinWidth","allAliases","reduce","prev","cur","Object","keys","forEach","key","columnKey","hasOwn","watch","newVal","value","parseWidth","parseMinWidth","columnConfig","updateColumns","store","scheduleLayout","registerNormalWatchers","property","align","headerAlign"],"sources":["../../../../../../../packages/components/table/src/table-column/watcher-helper.ts"],"sourcesContent":["import { watch, getCurrentInstance } from 'vue'\nimport { hasOwn } from '@element-plus/utils'\nimport { parseMinWidth, parseWidth } from '../util'\n\nimport type { ComputedRef } from 'vue'\nimport type { TableColumnCtx, TableColumn, ValueOf } from './defaults'\n\nfunction useWatcher<T>(\n  owner: ComputedRef<any>,\n  props_: Partial<TableColumnCtx<T>>\n) {\n  const instance = getCurrentInstance() as TableColumn<T>\n  const registerComplexWatchers = () => {\n    const props = ['fixed']\n    const aliases = {\n      realWidth: 'width',\n      realMinWidth: 'minWidth',\n    }\n    const allAliases = props.reduce((prev, cur) => {\n      prev[cur] = cur\n      return prev\n    }, aliases)\n\n    Object.keys(allAliases).forEach((key) => {\n      const columnKey = aliases[key]\n      if (hasOwn(props_, columnKey)) {\n        watch(\n          () => props_[columnKey],\n          (newVal) => {\n            let value: ValueOf<TableColumnCtx<T>> = newVal\n            if (columnKey === 'width' && key === 'realWidth') {\n              value = parseWidth(newVal)\n            }\n            if (columnKey === 'minWidth' && key === 'realMinWidth') {\n              value = parseMinWidth(newVal)\n            }\n            instance.columnConfig.value[columnKey as any] = value\n            instance.columnConfig.value[key] = value\n            const updateColumns = columnKey === 'fixed'\n            owner.value.store.scheduleLayout(updateColumns)\n          }\n        )\n      }\n    })\n  }\n  const registerNormalWatchers = () => {\n    const props = [\n      'label',\n      'filters',\n      'filterMultiple',\n      'sortable',\n      'index',\n      'formatter',\n      'className',\n      'labelClassName',\n      'showOverflowTooltip',\n    ]\n    const aliases = {\n      property: 'prop',\n      align: 'realAlign',\n      headerAlign: 'realHeaderAlign',\n    }\n    const allAliases = props.reduce((prev, cur) => {\n      prev[cur] = cur\n      return prev\n    }, aliases)\n    Object.keys(allAliases).forEach((key) => {\n      const columnKey = aliases[key]\n      if (hasOwn(props_, columnKey)) {\n        watch(\n          () => props_[columnKey],\n          (newVal) => {\n            instance.columnConfig.value[key] = newVal\n          }\n        )\n      }\n    })\n  }\n\n  return {\n    registerComplexWatchers,\n    registerNormalWatchers,\n  }\n}\n\nexport default useWatcher\n"]},"metadata":{},"sourceType":"module"}