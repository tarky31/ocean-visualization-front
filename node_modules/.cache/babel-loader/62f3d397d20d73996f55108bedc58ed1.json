{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { defineComponent, computed, ref, inject, resolveComponent, openBlock, createElementBlock, createElementVNode, toDisplayString, normalizeClass, createVNode, createCommentVNode } from 'vue';\nimport dayjs from 'dayjs';\nimport { union } from 'lodash-unified';\nimport '../../../../hooks/index.mjs';\nimport '../../../../constants/index.mjs';\nimport TimeSpinner from './basic-time-spinner.mjs';\nimport { useOldValue, getAvailableArrs } from './useTimePicker.mjs';\nimport _export_sfc from '../../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useLocale } from '../../../../hooks/use-locale/index.mjs';\nimport { EVENT_CODE } from '../../../../constants/aria.mjs';\n\nvar makeSelectRange = function makeSelectRange(start, end) {\n  var result = [];\n\n  for (var i = start; i <= end; i++) {\n    result.push(i);\n  }\n\n  return result;\n};\n\nvar _sfc_main = defineComponent({\n  components: {\n    TimeSpinner: TimeSpinner\n  },\n  props: {\n    visible: Boolean,\n    actualVisible: Boolean,\n    parsedValue: {\n      type: [Array]\n    },\n    format: {\n      type: String,\n      default: \"\"\n    }\n  },\n  emits: [\"pick\", \"select-range\", \"set-picker-option\"],\n  setup: function setup(props, ctx) {\n    var _useLocale = useLocale(),\n        t = _useLocale.t,\n        lang = _useLocale.lang;\n\n    var minDate = computed(function () {\n      return props.parsedValue[0];\n    });\n    var maxDate = computed(function () {\n      return props.parsedValue[1];\n    });\n    var oldValue = useOldValue(props);\n\n    var handleCancel = function handleCancel() {\n      ctx.emit(\"pick\", oldValue.value, null);\n    };\n\n    var showSeconds = computed(function () {\n      return props.format.includes(\"ss\");\n    });\n    var amPmMode = computed(function () {\n      if (props.format.includes(\"A\")) return \"A\";\n      if (props.format.includes(\"a\")) return \"a\";\n      return \"\";\n    });\n    var minSelectableRange = ref([]);\n    var maxSelectableRange = ref([]);\n\n    var handleConfirm = function handleConfirm() {\n      var visible = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      ctx.emit(\"pick\", [minDate.value, maxDate.value], visible);\n    };\n\n    var handleMinChange = function handleMinChange(date) {\n      handleChange(date.millisecond(0), maxDate.value);\n    };\n\n    var handleMaxChange = function handleMaxChange(date) {\n      handleChange(minDate.value, date.millisecond(0));\n    };\n\n    var isValidValue = function isValidValue(_date) {\n      var parsedDate = _date.map(function (_) {\n        return dayjs(_).locale(lang.value);\n      });\n\n      var result = getRangeAvailableTime(parsedDate);\n      return parsedDate[0].isSame(result[0]) && parsedDate[1].isSame(result[1]);\n    };\n\n    var handleChange = function handleChange(_minDate, _maxDate) {\n      ctx.emit(\"pick\", [_minDate, _maxDate], true);\n    };\n\n    var btnConfirmDisabled = computed(function () {\n      return minDate.value > maxDate.value;\n    });\n    var selectionRange = ref([0, 2]);\n\n    var setMinSelectionRange = function setMinSelectionRange(start, end) {\n      ctx.emit(\"select-range\", start, end, \"min\");\n      selectionRange.value = [start, end];\n    };\n\n    var offset = computed(function () {\n      return showSeconds.value ? 11 : 8;\n    });\n\n    var setMaxSelectionRange = function setMaxSelectionRange(start, end) {\n      ctx.emit(\"select-range\", start, end, \"max\");\n      selectionRange.value = [start + offset.value, end + offset.value];\n    };\n\n    var changeSelectionRange = function changeSelectionRange(step) {\n      var list = showSeconds.value ? [0, 3, 6, 11, 14, 17] : [0, 3, 8, 11];\n      var mapping = [\"hours\", \"minutes\"].concat(showSeconds.value ? [\"seconds\"] : []);\n      var index = list.indexOf(selectionRange.value[0]);\n      var next = (index + step + list.length) % list.length;\n      var half = list.length / 2;\n\n      if (next < half) {\n        timePickerOptions[\"start_emitSelectRange\"](mapping[next]);\n      } else {\n        timePickerOptions[\"end_emitSelectRange\"](mapping[next - half]);\n      }\n    };\n\n    var handleKeydown = function handleKeydown(event) {\n      var code = event.code;\n\n      if (code === EVENT_CODE.left || code === EVENT_CODE.right) {\n        var step = code === EVENT_CODE.left ? -1 : 1;\n        changeSelectionRange(step);\n        event.preventDefault();\n        return;\n      }\n\n      if (code === EVENT_CODE.up || code === EVENT_CODE.down) {\n        var _step = code === EVENT_CODE.up ? -1 : 1;\n\n        var role = selectionRange.value[0] < offset.value ? \"start\" : \"end\";\n        timePickerOptions[\"\".concat(role, \"_scrollDown\")](_step);\n        event.preventDefault();\n        return;\n      }\n    };\n\n    var disabledHours_ = function disabledHours_(role, compare) {\n      var defaultDisable = disabledHours ? disabledHours(role) : [];\n      var isStart = role === \"start\";\n      var compareDate = compare || (isStart ? maxDate.value : minDate.value);\n      var compareHour = compareDate.hour();\n      var nextDisable = isStart ? makeSelectRange(compareHour + 1, 23) : makeSelectRange(0, compareHour - 1);\n      return union(defaultDisable, nextDisable);\n    };\n\n    var disabledMinutes_ = function disabledMinutes_(hour, role, compare) {\n      var defaultDisable = disabledMinutes ? disabledMinutes(hour, role) : [];\n      var isStart = role === \"start\";\n      var compareDate = compare || (isStart ? maxDate.value : minDate.value);\n      var compareHour = compareDate.hour();\n\n      if (hour !== compareHour) {\n        return defaultDisable;\n      }\n\n      var compareMinute = compareDate.minute();\n      var nextDisable = isStart ? makeSelectRange(compareMinute + 1, 59) : makeSelectRange(0, compareMinute - 1);\n      return union(defaultDisable, nextDisable);\n    };\n\n    var disabledSeconds_ = function disabledSeconds_(hour, minute, role, compare) {\n      var defaultDisable = disabledSeconds ? disabledSeconds(hour, minute, role) : [];\n      var isStart = role === \"start\";\n      var compareDate = compare || (isStart ? maxDate.value : minDate.value);\n      var compareHour = compareDate.hour();\n      var compareMinute = compareDate.minute();\n\n      if (hour !== compareHour || minute !== compareMinute) {\n        return defaultDisable;\n      }\n\n      var compareSecond = compareDate.second();\n      var nextDisable = isStart ? makeSelectRange(compareSecond + 1, 59) : makeSelectRange(0, compareSecond - 1);\n      return union(defaultDisable, nextDisable);\n    };\n\n    var getRangeAvailableTime = function getRangeAvailableTime(dates) {\n      return dates.map(function (_, index) {\n        return getRangeAvailableTimeEach(dates[0], dates[1], index === 0 ? \"start\" : \"end\");\n      });\n    };\n\n    var _getAvailableArrs = getAvailableArrs(disabledHours_, disabledMinutes_, disabledSeconds_),\n        getAvailableHours = _getAvailableArrs.getAvailableHours,\n        getAvailableMinutes = _getAvailableArrs.getAvailableMinutes,\n        getAvailableSeconds = _getAvailableArrs.getAvailableSeconds;\n\n    var getRangeAvailableTimeEach = function getRangeAvailableTimeEach(startDate, endDate, role) {\n      var availableMap = {\n        hour: getAvailableHours,\n        minute: getAvailableMinutes,\n        second: getAvailableSeconds\n      };\n      var isStart = role === \"start\";\n      var result = isStart ? startDate : endDate;\n      var compareDate = isStart ? endDate : startDate;\n      [\"hour\", \"minute\", \"second\"].forEach(function (_) {\n        if (availableMap[_]) {\n          var availableArr;\n          var method = availableMap[_];\n\n          if (_ === \"minute\") {\n            availableArr = method(result.hour(), role, compareDate);\n          } else if (_ === \"second\") {\n            availableArr = method(result.hour(), result.minute(), role, compareDate);\n          } else {\n            availableArr = method(role, compareDate);\n          }\n\n          if (availableArr && availableArr.length && !availableArr.includes(result[_]())) {\n            var pos = isStart ? 0 : availableArr.length - 1;\n            result = result[_](availableArr[pos]);\n          }\n        }\n      });\n      return result;\n    };\n\n    var parseUserInput = function parseUserInput(value) {\n      if (!value) return null;\n\n      if (Array.isArray(value)) {\n        return value.map(function (_) {\n          return dayjs(_, props.format).locale(lang.value);\n        });\n      }\n\n      return dayjs(value, props.format).locale(lang.value);\n    };\n\n    var formatToString = function formatToString(value) {\n      if (!value) return null;\n\n      if (Array.isArray(value)) {\n        return value.map(function (_) {\n          return _.format(props.format);\n        });\n      }\n\n      return value.format(props.format);\n    };\n\n    var getDefaultValue = function getDefaultValue() {\n      if (Array.isArray(defaultValue)) {\n        return defaultValue.map(function (_) {\n          return dayjs(_).locale(lang.value);\n        });\n      }\n\n      var defaultDay = dayjs(defaultValue).locale(lang.value);\n      return [defaultDay, defaultDay.add(60, \"m\")];\n    };\n\n    ctx.emit(\"set-picker-option\", [\"formatToString\", formatToString]);\n    ctx.emit(\"set-picker-option\", [\"parseUserInput\", parseUserInput]);\n    ctx.emit(\"set-picker-option\", [\"isValidValue\", isValidValue]);\n    ctx.emit(\"set-picker-option\", [\"handleKeydown\", handleKeydown]);\n    ctx.emit(\"set-picker-option\", [\"getDefaultValue\", getDefaultValue]);\n    ctx.emit(\"set-picker-option\", [\"getRangeAvailableTime\", getRangeAvailableTime]);\n    var timePickerOptions = {};\n\n    var onSetOption = function onSetOption(e) {\n      timePickerOptions[e[0]] = e[1];\n    };\n\n    var pickerBase = inject(\"EP_PICKER_BASE\");\n    var _pickerBase$props = pickerBase.props,\n        arrowControl = _pickerBase$props.arrowControl,\n        disabledHours = _pickerBase$props.disabledHours,\n        disabledMinutes = _pickerBase$props.disabledMinutes,\n        disabledSeconds = _pickerBase$props.disabledSeconds,\n        defaultValue = _pickerBase$props.defaultValue;\n    return {\n      arrowControl: arrowControl,\n      onSetOption: onSetOption,\n      setMaxSelectionRange: setMaxSelectionRange,\n      setMinSelectionRange: setMinSelectionRange,\n      btnConfirmDisabled: btnConfirmDisabled,\n      handleCancel: handleCancel,\n      handleConfirm: handleConfirm,\n      t: t,\n      showSeconds: showSeconds,\n      minDate: minDate,\n      maxDate: maxDate,\n      amPmMode: amPmMode,\n      handleMinChange: handleMinChange,\n      handleMaxChange: handleMaxChange,\n      minSelectableRange: minSelectableRange,\n      maxSelectableRange: maxSelectableRange,\n      disabledHours_: disabledHours_,\n      disabledMinutes_: disabledMinutes_,\n      disabledSeconds_: disabledSeconds_\n    };\n  }\n});\n\nvar _hoisted_1 = {\n  key: 0,\n  class: \"el-time-range-picker el-picker-panel\"\n};\nvar _hoisted_2 = {\n  class: \"el-time-range-picker__content\"\n};\nvar _hoisted_3 = {\n  class: \"el-time-range-picker__cell\"\n};\nvar _hoisted_4 = {\n  class: \"el-time-range-picker__header\"\n};\nvar _hoisted_5 = {\n  class: \"el-time-range-picker__cell\"\n};\nvar _hoisted_6 = {\n  class: \"el-time-range-picker__header\"\n};\nvar _hoisted_7 = {\n  class: \"el-time-panel__footer\"\n};\nvar _hoisted_8 = [\"disabled\"];\n\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_time_spinner = resolveComponent(\"time-spinner\");\n\n  return _ctx.actualVisible ? (openBlock(), createElementBlock(\"div\", _hoisted_1, [createElementVNode(\"div\", _hoisted_2, [createElementVNode(\"div\", _hoisted_3, [createElementVNode(\"div\", _hoisted_4, toDisplayString(_ctx.t(\"el.datepicker.startTime\")), 1), createElementVNode(\"div\", {\n    class: normalizeClass([{\n      \"has-seconds\": _ctx.showSeconds,\n      \"is-arrow\": _ctx.arrowControl\n    }, \"el-time-range-picker__body el-time-panel__content\"])\n  }, [createVNode(_component_time_spinner, {\n    ref: \"minSpinner\",\n    role: \"start\",\n    \"show-seconds\": _ctx.showSeconds,\n    \"am-pm-mode\": _ctx.amPmMode,\n    \"arrow-control\": _ctx.arrowControl,\n    \"spinner-date\": _ctx.minDate,\n    \"disabled-hours\": _ctx.disabledHours_,\n    \"disabled-minutes\": _ctx.disabledMinutes_,\n    \"disabled-seconds\": _ctx.disabledSeconds_,\n    onChange: _ctx.handleMinChange,\n    onSetOption: _ctx.onSetOption,\n    onSelectRange: _ctx.setMinSelectionRange\n  }, null, 8, [\"show-seconds\", \"am-pm-mode\", \"arrow-control\", \"spinner-date\", \"disabled-hours\", \"disabled-minutes\", \"disabled-seconds\", \"onChange\", \"onSetOption\", \"onSelectRange\"])], 2)]), createElementVNode(\"div\", _hoisted_5, [createElementVNode(\"div\", _hoisted_6, toDisplayString(_ctx.t(\"el.datepicker.endTime\")), 1), createElementVNode(\"div\", {\n    class: normalizeClass([{\n      \"has-seconds\": _ctx.showSeconds,\n      \"is-arrow\": _ctx.arrowControl\n    }, \"el-time-range-picker__body el-time-panel__content\"])\n  }, [createVNode(_component_time_spinner, {\n    ref: \"maxSpinner\",\n    role: \"end\",\n    \"show-seconds\": _ctx.showSeconds,\n    \"am-pm-mode\": _ctx.amPmMode,\n    \"arrow-control\": _ctx.arrowControl,\n    \"spinner-date\": _ctx.maxDate,\n    \"disabled-hours\": _ctx.disabledHours_,\n    \"disabled-minutes\": _ctx.disabledMinutes_,\n    \"disabled-seconds\": _ctx.disabledSeconds_,\n    onChange: _ctx.handleMaxChange,\n    onSetOption: _ctx.onSetOption,\n    onSelectRange: _ctx.setMaxSelectionRange\n  }, null, 8, [\"show-seconds\", \"am-pm-mode\", \"arrow-control\", \"spinner-date\", \"disabled-hours\", \"disabled-minutes\", \"disabled-seconds\", \"onChange\", \"onSetOption\", \"onSelectRange\"])], 2)])]), createElementVNode(\"div\", _hoisted_7, [createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"el-time-panel__btn cancel\",\n    onClick: _cache[0] || (_cache[0] = function ($event) {\n      return _ctx.handleCancel();\n    })\n  }, toDisplayString(_ctx.t(\"el.datepicker.cancel\")), 1), createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"el-time-panel__btn confirm\",\n    disabled: _ctx.btnConfirmDisabled,\n    onClick: _cache[1] || (_cache[1] = function ($event) {\n      return _ctx.handleConfirm();\n    })\n  }, toDisplayString(_ctx.t(\"el.datepicker.confirm\")), 9, _hoisted_8)])])) : createCommentVNode(\"v-if\", true);\n}\n\nvar TimeRangePanel = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\n\nexport { TimeRangePanel as default };","map":{"version":3,"mappings":"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","names":["makeSelectRange","start","end","result","i","push","_sfc_main","defineComponent","components","TimeSpinner","props","visible","Boolean","actualVisible","parsedValue","type","Array","format","String","default","emits","setup","ctx","useLocale","t","lang","minDate","computed","maxDate","oldValue","useOldValue","handleCancel","emit","value","showSeconds","includes","amPmMode","minSelectableRange","ref","maxSelectableRange","handleConfirm","handleMinChange","date","handleChange","millisecond","handleMaxChange","isValidValue","_date","parsedDate","map","_","dayjs","locale","getRangeAvailableTime","isSame","_minDate","_maxDate","btnConfirmDisabled","selectionRange","setMinSelectionRange","offset","setMaxSelectionRange","changeSelectionRange","step","list","mapping","concat","index","indexOf","next","length","half","timePickerOptions","handleKeydown","event","code","EVENT_CODE","left","right","preventDefault","up","down","role","disabledHours_","compare","defaultDisable","disabledHours","isStart","compareDate","compareHour","hour","nextDisable","union","disabledMinutes_","disabledMinutes","compareMinute","minute","disabledSeconds_","disabledSeconds","compareSecond","second","dates","getRangeAvailableTimeEach","getAvailableArrs","getAvailableHours","getAvailableMinutes","getAvailableSeconds","startDate","endDate","availableMap","forEach","availableArr","method","pos","parseUserInput","isArray","formatToString","getDefaultValue","defaultValue","defaultDay","add","onSetOption","e","pickerBase","inject","arrowControl","class","_ctx","_createElementBlock","_createElementVNode","_toDisplayString","_normalizeClass","_createVNode","_component_time_spinner","onChange","onSelectRange","onClick","_cache","toDisplayString","disabled","_hoisted_8","createCommentVNode"],"sources":["../../../../../../../packages/components/time-picker/src/time-picker-com/panel-time-range.vue"],"sourcesContent":["<template>\n  <div v-if=\"actualVisible\" class=\"el-time-range-picker el-picker-panel\">\n    <div class=\"el-time-range-picker__content\">\n      <div class=\"el-time-range-picker__cell\">\n        <div class=\"el-time-range-picker__header\">\n          {{ t('el.datepicker.startTime') }}\n        </div>\n        <div\n          :class=\"{ 'has-seconds': showSeconds, 'is-arrow': arrowControl }\"\n          class=\"el-time-range-picker__body el-time-panel__content\"\n        >\n          <time-spinner\n            ref=\"minSpinner\"\n            role=\"start\"\n            :show-seconds=\"showSeconds\"\n            :am-pm-mode=\"amPmMode\"\n            :arrow-control=\"arrowControl\"\n            :spinner-date=\"minDate\"\n            :disabled-hours=\"disabledHours_\"\n            :disabled-minutes=\"disabledMinutes_\"\n            :disabled-seconds=\"disabledSeconds_\"\n            @change=\"handleMinChange\"\n            @set-option=\"onSetOption\"\n            @select-range=\"setMinSelectionRange\"\n          />\n        </div>\n      </div>\n      <div class=\"el-time-range-picker__cell\">\n        <div class=\"el-time-range-picker__header\">\n          {{ t('el.datepicker.endTime') }}\n        </div>\n        <div\n          :class=\"{ 'has-seconds': showSeconds, 'is-arrow': arrowControl }\"\n          class=\"el-time-range-picker__body el-time-panel__content\"\n        >\n          <time-spinner\n            ref=\"maxSpinner\"\n            role=\"end\"\n            :show-seconds=\"showSeconds\"\n            :am-pm-mode=\"amPmMode\"\n            :arrow-control=\"arrowControl\"\n            :spinner-date=\"maxDate\"\n            :disabled-hours=\"disabledHours_\"\n            :disabled-minutes=\"disabledMinutes_\"\n            :disabled-seconds=\"disabledSeconds_\"\n            @change=\"handleMaxChange\"\n            @set-option=\"onSetOption\"\n            @select-range=\"setMaxSelectionRange\"\n          />\n        </div>\n      </div>\n    </div>\n    <div class=\"el-time-panel__footer\">\n      <button\n        type=\"button\"\n        class=\"el-time-panel__btn cancel\"\n        @click=\"handleCancel()\"\n      >\n        {{ t('el.datepicker.cancel') }}\n      </button>\n      <button\n        type=\"button\"\n        class=\"el-time-panel__btn confirm\"\n        :disabled=\"btnConfirmDisabled\"\n        @click=\"handleConfirm()\"\n      >\n        {{ t('el.datepicker.confirm') }}\n      </button>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, computed, inject } from 'vue'\nimport dayjs from 'dayjs'\nimport { union } from 'lodash-unified'\nimport { useLocale } from '@element-plus/hooks'\nimport { EVENT_CODE } from '@element-plus/constants'\nimport TimeSpinner from './basic-time-spinner.vue'\nimport { getAvailableArrs, useOldValue } from './useTimePicker'\n\nimport type { PropType } from 'vue'\nimport type { Dayjs } from 'dayjs'\n\nconst makeSelectRange = (start: number, end: number) => {\n  const result = []\n  for (let i = start; i <= end; i++) {\n    result.push(i)\n  }\n  return result\n}\nexport default defineComponent({\n  components: { TimeSpinner },\n\n  props: {\n    visible: Boolean,\n    actualVisible: Boolean,\n    parsedValue: {\n      type: [Array] as PropType<Array<Dayjs>>,\n    },\n    format: {\n      type: String,\n      default: '',\n    },\n  },\n\n  emits: ['pick', 'select-range', 'set-picker-option'],\n\n  setup(props, ctx) {\n    const { t, lang } = useLocale()\n    const minDate = computed(() => props.parsedValue[0])\n    const maxDate = computed(() => props.parsedValue[1])\n    const oldValue = useOldValue(props)\n    const handleCancel = () => {\n      ctx.emit('pick', oldValue.value, null)\n    }\n    const showSeconds = computed(() => {\n      return props.format.includes('ss')\n    })\n    const amPmMode = computed(() => {\n      if (props.format.includes('A')) return 'A'\n      if (props.format.includes('a')) return 'a'\n      return ''\n    })\n\n    const minSelectableRange = ref([])\n    const maxSelectableRange = ref([])\n\n    const handleConfirm = (visible = false) => {\n      ctx.emit('pick', [minDate.value, maxDate.value], visible)\n    }\n\n    const handleMinChange = (date) => {\n      handleChange(date.millisecond(0), maxDate.value)\n    }\n    const handleMaxChange = (date) => {\n      handleChange(minDate.value, date.millisecond(0))\n    }\n\n    const isValidValue = (_date: Dayjs[]) => {\n      const parsedDate = _date.map((_) => dayjs(_).locale(lang.value))\n      const result = getRangeAvailableTime(parsedDate)\n      return parsedDate[0].isSame(result[0]) && parsedDate[1].isSame(result[1])\n    }\n\n    const handleChange = (_minDate, _maxDate) => {\n      // todo getRangeAvailableTime(_date).millisecond(0)\n      ctx.emit('pick', [_minDate, _maxDate], true)\n    }\n    const btnConfirmDisabled = computed(() => {\n      return minDate.value > maxDate.value\n    })\n\n    const selectionRange = ref([0, 2])\n    const setMinSelectionRange = (start, end) => {\n      ctx.emit('select-range', start, end, 'min')\n      selectionRange.value = [start, end]\n    }\n\n    const offset = computed(() => (showSeconds.value ? 11 : 8))\n    const setMaxSelectionRange = (start, end) => {\n      ctx.emit('select-range', start, end, 'max')\n      selectionRange.value = [start + offset.value, end + offset.value]\n    }\n\n    const changeSelectionRange = (step) => {\n      const list = showSeconds.value ? [0, 3, 6, 11, 14, 17] : [0, 3, 8, 11]\n      const mapping = ['hours', 'minutes'].concat(\n        showSeconds.value ? ['seconds'] : []\n      )\n      const index = list.indexOf(selectionRange.value[0])\n      const next = (index + step + list.length) % list.length\n      const half = list.length / 2\n      if (next < half) {\n        timePickerOptions['start_emitSelectRange'](mapping[next])\n      } else {\n        timePickerOptions['end_emitSelectRange'](mapping[next - half])\n      }\n    }\n\n    const handleKeydown = (event: KeyboardEvent) => {\n      const code = event.code\n\n      if (code === EVENT_CODE.left || code === EVENT_CODE.right) {\n        const step = code === EVENT_CODE.left ? -1 : 1\n        changeSelectionRange(step)\n        event.preventDefault()\n        return\n      }\n\n      if (code === EVENT_CODE.up || code === EVENT_CODE.down) {\n        const step = code === EVENT_CODE.up ? -1 : 1\n        const role = selectionRange.value[0] < offset.value ? 'start' : 'end'\n        timePickerOptions[`${role}_scrollDown`](step)\n        event.preventDefault()\n        return\n      }\n    }\n\n    const disabledHours_ = (role, compare) => {\n      const defaultDisable = disabledHours ? disabledHours(role) : []\n      const isStart = role === 'start'\n      const compareDate = compare || (isStart ? maxDate.value : minDate.value)\n      const compareHour = compareDate.hour()\n      const nextDisable = isStart\n        ? makeSelectRange(compareHour + 1, 23)\n        : makeSelectRange(0, compareHour - 1)\n      return union(defaultDisable, nextDisable)\n    }\n    const disabledMinutes_ = (hour, role, compare) => {\n      const defaultDisable = disabledMinutes ? disabledMinutes(hour, role) : []\n      const isStart = role === 'start'\n      const compareDate = compare || (isStart ? maxDate.value : minDate.value)\n      const compareHour = compareDate.hour()\n      if (hour !== compareHour) {\n        return defaultDisable\n      }\n      const compareMinute = compareDate.minute()\n      const nextDisable = isStart\n        ? makeSelectRange(compareMinute + 1, 59)\n        : makeSelectRange(0, compareMinute - 1)\n      return union(defaultDisable, nextDisable)\n    }\n    const disabledSeconds_ = (hour, minute, role, compare) => {\n      const defaultDisable = disabledSeconds\n        ? disabledSeconds(hour, minute, role)\n        : []\n      const isStart = role === 'start'\n      const compareDate = compare || (isStart ? maxDate.value : minDate.value)\n      const compareHour = compareDate.hour()\n      const compareMinute = compareDate.minute()\n      if (hour !== compareHour || minute !== compareMinute) {\n        return defaultDisable\n      }\n      const compareSecond = compareDate.second()\n      const nextDisable = isStart\n        ? makeSelectRange(compareSecond + 1, 59)\n        : makeSelectRange(0, compareSecond - 1)\n      return union(defaultDisable, nextDisable)\n    }\n\n    const getRangeAvailableTime = (dates: Array<Dayjs>) => {\n      return dates.map((_, index) =>\n        getRangeAvailableTimeEach(\n          dates[0],\n          dates[1],\n          index === 0 ? 'start' : 'end'\n        )\n      )\n    }\n\n    const { getAvailableHours, getAvailableMinutes, getAvailableSeconds } =\n      getAvailableArrs(disabledHours_, disabledMinutes_, disabledSeconds_)\n\n    const getRangeAvailableTimeEach = (\n      startDate: Dayjs,\n      endDate: Dayjs,\n      role\n    ) => {\n      const availableMap = {\n        hour: getAvailableHours,\n        minute: getAvailableMinutes,\n        second: getAvailableSeconds,\n      }\n      const isStart = role === 'start'\n      let result = isStart ? startDate : endDate\n      const compareDate = isStart ? endDate : startDate\n      ;['hour', 'minute', 'second'].forEach((_) => {\n        if (availableMap[_]) {\n          let availableArr\n          const method = availableMap[_]\n          if (_ === 'minute') {\n            availableArr = method(result.hour(), role, compareDate)\n          } else if (_ === 'second') {\n            availableArr = method(\n              result.hour(),\n              result.minute(),\n              role,\n              compareDate\n            )\n          } else {\n            availableArr = method(role, compareDate)\n          }\n          if (\n            availableArr &&\n            availableArr.length &&\n            !availableArr.includes(result[_]())\n          ) {\n            const pos = isStart ? 0 : availableArr.length - 1\n            result = result[_](availableArr[pos])\n          }\n        }\n      })\n      return result\n    }\n\n    const parseUserInput = (value: Dayjs[] | Dayjs) => {\n      if (!value) return null\n      if (Array.isArray(value)) {\n        return value.map((_) => dayjs(_, props.format).locale(lang.value))\n      }\n      return dayjs(value, props.format).locale(lang.value)\n    }\n\n    const formatToString = (value: Dayjs[] | Dayjs) => {\n      if (!value) return null\n      if (Array.isArray(value)) {\n        return value.map((_) => _.format(props.format))\n      }\n      return value.format(props.format)\n    }\n\n    const getDefaultValue = () => {\n      if (Array.isArray(defaultValue)) {\n        return defaultValue.map((_) => dayjs(_).locale(lang.value))\n      }\n      const defaultDay = dayjs(defaultValue).locale(lang.value)\n      return [defaultDay, defaultDay.add(60, 'm')]\n    }\n\n    ctx.emit('set-picker-option', ['formatToString', formatToString])\n    ctx.emit('set-picker-option', ['parseUserInput', parseUserInput])\n    ctx.emit('set-picker-option', ['isValidValue', isValidValue])\n    ctx.emit('set-picker-option', ['handleKeydown', handleKeydown])\n    ctx.emit('set-picker-option', ['getDefaultValue', getDefaultValue])\n    ctx.emit('set-picker-option', [\n      'getRangeAvailableTime',\n      getRangeAvailableTime,\n    ])\n\n    const timePickerOptions = {} as any\n    const onSetOption = (e) => {\n      timePickerOptions[e[0]] = e[1]\n    }\n\n    const pickerBase = inject('EP_PICKER_BASE') as any\n    const {\n      arrowControl,\n      disabledHours,\n      disabledMinutes,\n      disabledSeconds,\n      defaultValue,\n    } = pickerBase.props\n\n    return {\n      arrowControl,\n      onSetOption,\n      setMaxSelectionRange,\n      setMinSelectionRange,\n      btnConfirmDisabled,\n      handleCancel,\n      handleConfirm,\n      t,\n      showSeconds,\n      minDate,\n      maxDate,\n      amPmMode,\n      handleMinChange,\n      handleMaxChange,\n      minSelectableRange,\n      maxSelectableRange,\n      disabledHours_,\n      disabledMinutes_,\n      disabledSeconds_,\n    }\n  },\n})\n</script>\n"]},"metadata":{},"sourceType":"module"}