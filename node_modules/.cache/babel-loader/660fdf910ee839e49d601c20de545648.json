{"ast":null,"code":"import _objectSpread from \"D:/MyFile/WebCode/ocean-vis/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { defineComponent, ref, nextTick, onMounted, provide, reactive, toRefs, watch, openBlock, createElementBlock, normalizeClass, renderSlot } from 'vue';\nimport '../../../constants/index.mjs';\nimport '../../../tokens/index.mjs';\nimport '../../../hooks/index.mjs';\nimport { radioGroupProps, radioGroupEmits } from './radio-group.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useFormItem } from '../../../hooks/use-form-item/index.mjs';\nimport { UPDATE_MODEL_EVENT } from '../../../constants/event.mjs';\nimport { EVENT_CODE } from '../../../constants/aria.mjs';\nimport { radioGroupKey } from '../../../tokens/radio.mjs';\n\nvar _sfc_main = defineComponent({\n  name: \"ElRadioGroup\",\n  props: radioGroupProps,\n  emits: radioGroupEmits,\n  setup: function setup(props, ctx) {\n    var ns = useNamespace(\"radio\");\n    var radioGroupRef = ref();\n\n    var _useFormItem = useFormItem(),\n        formItem = _useFormItem.formItem;\n\n    var changeEvent = function changeEvent(value) {\n      ctx.emit(UPDATE_MODEL_EVENT, value);\n      nextTick(function () {\n        return ctx.emit(\"change\", value);\n      });\n    };\n\n    var handleKeydown = function handleKeydown(e) {\n      if (!radioGroupRef.value) return;\n      var target = e.target;\n      var className = target.nodeName === \"INPUT\" ? \"[type=radio]\" : \"[role=radio]\";\n      var radios = radioGroupRef.value.querySelectorAll(className);\n      var length = radios.length;\n      var index = Array.from(radios).indexOf(target);\n      var roleRadios = radioGroupRef.value.querySelectorAll(\"[role=radio]\");\n      var nextIndex = null;\n\n      switch (e.code) {\n        case EVENT_CODE.left:\n        case EVENT_CODE.up:\n          e.stopPropagation();\n          e.preventDefault();\n          nextIndex = index === 0 ? length - 1 : index - 1;\n          break;\n\n        case EVENT_CODE.right:\n        case EVENT_CODE.down:\n          e.stopPropagation();\n          e.preventDefault();\n          nextIndex = index === length - 1 ? 0 : index + 1;\n          break;\n\n        default:\n          break;\n      }\n\n      if (nextIndex === null) return;\n      roleRadios[nextIndex].click();\n      roleRadios[nextIndex].focus();\n    };\n\n    onMounted(function () {\n      var radios = radioGroupRef.value.querySelectorAll(\"[type=radio]\");\n      var firstLabel = radios[0];\n\n      if (!Array.from(radios).some(function (radio) {\n        return radio.checked;\n      }) && firstLabel) {\n        firstLabel.tabIndex = 0;\n      }\n    });\n    provide(radioGroupKey, reactive(_objectSpread(_objectSpread({}, toRefs(props)), {}, {\n      changeEvent: changeEvent\n    })));\n    watch(function () {\n      return props.modelValue;\n    }, function () {\n      return formItem == null ? void 0 : formItem.validate(\"change\");\n    });\n    return {\n      ns: ns,\n      radioGroupRef: radioGroupRef,\n      handleKeydown: handleKeydown\n    };\n  }\n});\n\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    ref: \"radioGroupRef\",\n    class: normalizeClass(_ctx.ns.b(\"group\")),\n    role: \"radiogroup\",\n    onKeydown: _cache[0] || (_cache[0] = function () {\n      return _ctx.handleKeydown && _ctx.handleKeydown.apply(_ctx, arguments);\n    })\n  }, [renderSlot(_ctx.$slots, \"default\")], 34);\n}\n\nvar RadioGroup = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\n\nexport { RadioGroup as default };","map":{"version":3,"mappings":"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","names":["_sfc_main","defineComponent","name","props","radioGroupProps","emits","radioGroupEmits","setup","ctx","ns","useNamespace","radioGroupRef","ref","useFormItem","formItem","changeEvent","value","emit","UPDATE_MODEL_EVENT","nextTick","handleKeydown","e","target","className","nodeName","radios","querySelectorAll","length","index","Array","from","indexOf","roleRadios","nextIndex","code","EVENT_CODE","left","up","stopPropagation","preventDefault","right","down","click","focus","onMounted","firstLabel","some","radio","checked","tabIndex","provide","radioGroupKey","reactive","toRefs","watch","modelValue","_createElementBlock","class","_normalizeClass","_ctx","b","role","onKeydown","_cache","_renderSlot"],"sources":["../../../../../../packages/components/radio/src/radio-group.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"radioGroupRef\"\n    :class=\"ns.b('group')\"\n    role=\"radiogroup\"\n    @keydown=\"handleKeydown\"\n  >\n    <slot></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  defineComponent,\n  nextTick,\n  provide,\n  onMounted,\n  ref,\n  reactive,\n  toRefs,\n  watch,\n} from 'vue'\nimport { EVENT_CODE, UPDATE_MODEL_EVENT } from '@element-plus/constants'\nimport { radioGroupKey } from '@element-plus/tokens'\nimport { useFormItem, useNamespace } from '@element-plus/hooks'\nimport { radioGroupEmits, radioGroupProps } from './radio-group'\nimport type { RadioGroupProps } from '..'\n\nexport default defineComponent({\n  name: 'ElRadioGroup',\n  props: radioGroupProps,\n  emits: radioGroupEmits,\n\n  setup(props, ctx) {\n    const ns = useNamespace('radio')\n    const radioGroupRef = ref<HTMLDivElement>()\n    const { formItem } = useFormItem()\n\n    const changeEvent = (value: RadioGroupProps['modelValue']) => {\n      ctx.emit(UPDATE_MODEL_EVENT, value)\n      nextTick(() => ctx.emit('change', value))\n    }\n\n    const handleKeydown = (e: KeyboardEvent) => {\n      if (!radioGroupRef.value) return\n\n      // 左右上下按键 可以在 radio 组内切换不同选项\n      const target = e.target as HTMLInputElement\n      const className =\n        target.nodeName === 'INPUT' ? '[type=radio]' : '[role=radio]'\n      const radios =\n        radioGroupRef.value.querySelectorAll<HTMLInputElement>(className)\n      const length = radios.length\n      const index = Array.from(radios).indexOf(target)\n      const roleRadios =\n        radioGroupRef.value.querySelectorAll<HTMLInputElement>('[role=radio]')\n\n      let nextIndex: number | null = null\n      switch (e.code) {\n        case EVENT_CODE.left:\n        case EVENT_CODE.up:\n          e.stopPropagation()\n          e.preventDefault()\n          nextIndex = index === 0 ? length - 1 : index - 1\n          break\n        case EVENT_CODE.right:\n        case EVENT_CODE.down:\n          e.stopPropagation()\n          e.preventDefault()\n          nextIndex = index === length - 1 ? 0 : index + 1\n          break\n        default:\n          break\n      }\n      if (nextIndex === null) return\n      roleRadios[nextIndex].click()\n      roleRadios[nextIndex].focus()\n    }\n\n    onMounted(() => {\n      const radios =\n        radioGroupRef.value!.querySelectorAll<HTMLInputElement>('[type=radio]')\n      const firstLabel = radios[0]\n      if (!Array.from(radios).some((radio) => radio.checked) && firstLabel) {\n        firstLabel.tabIndex = 0\n      }\n    })\n\n    provide(\n      radioGroupKey,\n      reactive({\n        ...toRefs(props),\n        changeEvent,\n      })\n    )\n\n    watch(\n      () => props.modelValue,\n      () => formItem?.validate('change')\n    )\n\n    return {\n      ns,\n      radioGroupRef,\n      handleKeydown,\n    }\n  },\n})\n</script>\n"]},"metadata":{},"sourceType":"module"}