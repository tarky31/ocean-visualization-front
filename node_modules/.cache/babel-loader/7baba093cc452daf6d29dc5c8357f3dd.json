{"ast":null,"code":"import \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.find.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"deliverySetting\",\n  components: {},\n  props: {},\n  data: function data() {\n    return {\n      itemTitle: \"\",\n      itemId: 0,\n      countries: [{\n        cid: 1,\n        cname: \"中国\",\n        pid: \"1\",\n        pname: \"广东\",\n        cityId: 1,\n        cityName: \"深圳\"\n      }, {\n        cid: 1,\n        cname: \"中国\",\n        pid: \"1\",\n        pname: \"广东\",\n        cityId: 2,\n        cityName: \"肇庆\"\n      }, {\n        cid: 1,\n        cname: \"中国\",\n        pid: \"2\",\n        pname: \"湖北\",\n        cityId: 3,\n        cityName: \"武汉\"\n      }, {\n        cid: 1,\n        cname: \"中国\",\n        pid: \"2\",\n        pname: \"湖北\",\n        cityId: 4,\n        cityName: \"咸宁\"\n      }, {\n        cid: 1,\n        cname: \"中国\",\n        pid: \"2\",\n        pname: \"湖北\",\n        cityId: 5,\n        cityName: \"恩施\"\n      }, {\n        cid: 2,\n        cname: \"美国\",\n        pid: \"3\",\n        pname: \"usa省州1\",\n        cityId: 6,\n        cityName: \"usa-city-1\"\n      }, {\n        cid: 2,\n        cname: \"美国\",\n        pid: \"3\",\n        pname: \"usa省州1\",\n        cityId: 7,\n        cityName: \"usa-city-2\"\n      }, {\n        cid: 2,\n        cname: \"美国\",\n        pid: \"3\",\n        pname: \"usa省州1\",\n        cityId: 8,\n        cityName: \"usa-city-3\"\n      }, {\n        cid: 2,\n        cname: \"美国\",\n        pid: \"4\",\n        pname: \"usa省州2\",\n        cityId: 9,\n        cityName: \"usa-city-4\"\n      }, {\n        cid: 2,\n        cname: \"美国\",\n        pid: \"4\",\n        pname: \"usa省州2\",\n        cityId: 10,\n        cityName: \"usa-city-5\"\n      }],\n      checkedCities: [1, 4, 9, 10]\n    };\n  },\n  computed: {},\n  methods: {\n    initPage: function initPage() {\n      var _this$$route$query = this.$route.query,\n          itemId = _this$$route$query.itemId,\n          itemTitle = _this$$route$query.itemTitle;\n      this.itemId = itemId;\n      this.itemTitle = itemTitle;\n      this.initAreaData();\n    },\n    //初始化数据\n    initAreaData: function initAreaData() {\n      var _this = this;\n\n      this.countries = this.countries.map(function (item) {\n        var res = item;\n\n        if (_this.checkedCities.includes(item.cityId)) {\n          res.checked = true;\n        } else {\n          res.checked = false;\n        }\n\n        return res;\n      });\n      var resCities = [];\n      this.countries.forEach(function (item) {\n        var obj = {};\n        var existsCountry = resCities.find(function (c) {\n          return c.cid == item.cid;\n        });\n\n        if (existsCountry) {\n          obj = existsCountry;\n        } else {\n          obj.cid = item.cid;\n          obj.cname = item.cname;\n        }\n\n        obj.checked = false;\n\n        if (!obj.pros) {\n          obj.pros = [];\n        }\n\n        var existsPro = obj.pros.find(function (c) {\n          return c.pid == item.pid;\n        });\n\n        if (!existsPro) {\n          existsPro = {\n            pid: item.pid,\n            pname: item.pname,\n            checked: false\n          };\n          obj.pros.push(existsPro);\n        }\n\n        if (!existsPro.cities) {\n          existsPro.cities = [];\n        }\n\n        existsPro.cities.push({\n          cityId: item.cityId,\n          cityName: item.cityName,\n          checked: item.checked\n        });\n\n        if (!existsCountry) {\n          resCities.push(obj);\n        }\n      });\n      this.countries = resCities;\n      this.opreationData();\n    },\n    //操作数据\n    opreationData: function opreationData() {\n      this.countries.forEach(function (c) {\n        c.pros.forEach(function (p) {\n          if (p.cities && p.cities.length > 0) {\n            p.checked = p.cities.every(function (p) {\n              return p.checked;\n            });\n          }\n        });\n\n        if (c.pros && c.pros.length > 0) {\n          c.checked = c.pros.every(function (p) {\n            return p.checked;\n          });\n        }\n      });\n    },\n    handleChecked: function handleChecked(level, item) {\n      var isChecked = item.checked;\n\n      switch (level) {\n        case \"country\":\n          if (item && item.pros) {\n            item.pros.forEach(function (p) {\n              if (p.cities) {\n                p.cities.forEach(function (c) {\n                  c.checked = isChecked;\n                });\n              }\n            });\n          }\n\n          break;\n\n        case \"pro\":\n          if (item && item.cities) {\n            item.cities.forEach(function (c) {\n              c.checked = isChecked;\n            });\n          }\n\n          break;\n\n        case \"city\":\n          break;\n      }\n\n      this.opreationData();\n    }\n  },\n  created: function created() {},\n  mounted: function mounted() {\n    this.initPage();\n  },\n  watch: {}\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACAA,yBADA;AAEAC,gBAFA;AAGAC,WAHA;AAIAC,MAJA,kBAIA;AACA;AACAC,mBADA;AAEAC,eAFA;AAGAC,kBACA;AACAC,cADA;AAEAC,mBAFA;AAGAC,gBAHA;AAIAC,mBAJA;AAKAC,iBALA;AAMAC;AANA,OADA,EASA;AACAL,cADA;AAEAC,mBAFA;AAGAC,gBAHA;AAIAC,mBAJA;AAKAC,iBALA;AAMAC;AANA,OATA,EAiBA;AACAL,cADA;AAEAC,mBAFA;AAGAC,gBAHA;AAIAC,mBAJA;AAKAC,iBALA;AAMAC;AANA,OAjBA,EAyBA;AACAL,cADA;AAEAC,mBAFA;AAGAC,gBAHA;AAIAC,mBAJA;AAKAC,iBALA;AAMAC;AANA,OAzBA,EAiCA;AACAL,cADA;AAEAC,mBAFA;AAGAC,gBAHA;AAIAC,mBAJA;AAKAC,iBALA;AAMAC;AANA,OAjCA,EAyCA;AACAL,cADA;AAEAC,mBAFA;AAGAC,gBAHA;AAIAC,uBAJA;AAKAC,iBALA;AAMAC;AANA,OAzCA,EAiDA;AACAL,cADA;AAEAC,mBAFA;AAGAC,gBAHA;AAIAC,uBAJA;AAKAC,iBALA;AAMAC;AANA,OAjDA,EAyDA;AACAL,cADA;AAEAC,mBAFA;AAGAC,gBAHA;AAIAC,uBAJA;AAKAC,iBALA;AAMAC;AANA,OAzDA,EAiEA;AACAL,cADA;AAEAC,mBAFA;AAGAC,gBAHA;AAIAC,uBAJA;AAKAC,iBALA;AAMAC;AANA,OAjEA,EAyEA;AACAL,cADA;AAEAC,mBAFA;AAGAC,gBAHA;AAIAC,uBAJA;AAKAC,kBALA;AAMAC;AANA,OAzEA,CAHA;AAqFAC;AArFA;AAuFA,GA5FA;AA6FAC,cA7FA;AA8FAC;AACAC,YADA,sBACA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AACA,KAPA;AAQA;AACAC,gBATA,0BASA;AAAA;;AACA;AACA;;AACA;AACAC;AACA,SAFA,MAEA;AACAA;AACA;;AACA;AACA,OARA;AAUA;AACA;AACA;AACA;AACA;AACA,SAFA;;AAIA;AACAC;AACA,SAFA,MAEA;AACAA;AACAA;AACA;;AAEAA;;AAEA;AACAA;AACA;;AAEA;AACA;AACA,SAFA;;AAIA;AACAC;AACAX,yBADA;AAEAC,6BAFA;AAGAW;AAHA;AAKAF;AACA;;AAEA;AACAC;AACA;;AAEAA;AACAT,6BADA;AAEAC,iCAFA;AAGAS;AAHA;;AAMA;AACAC;AACA;AACA,OA7CA;AA+CA;AACA;AACA,KAtEA;AAuEA;AACAC,iBAxEA,2BAwEA;AACA;AACAC;AACA;AACAC;AAAA;AAAA;AACA;AACA,SAJA;;AAMA;AACAD;AAAA;AAAA;AACA;AACA,OAVA;AAWA,KApFA;AAqFAE,iBArFA,yBAqFAC,KArFA,EAqFAC,IArFA,EAqFA;AACA;;AACA;AACA;AACA;AACAA;AACA;AACAH;AACAD;AACA,iBAFA;AAGA;AACA,aANA;AAOA;;AACA;;AACA;AACA;AACAI;AACAJ;AACA,aAFA;AAGA;;AACA;;AACA;AACA;AApBA;;AAsBA;AACA;AA9GA,GA9FA;AA8MAK,gCA9MA;AA+MAC,SA/MA,qBA+MA;AACA;AACA,GAjNA;AAkNAC;AAlNA","names":["name","components","props","data","itemTitle","itemId","countries","cid","cname","pid","pname","cityId","cityName","checkedCities","computed","methods","initPage","initAreaData","res","obj","existsPro","checked","resCities","opreationData","c","p","handleChecked","level","item","created","mounted","watch"],"sourceRoot":"views","sources":["Test.vue"],"sourcesContent":[" \r\n<template>\r\n  <app-scroll-box class=\"page-clientsManage\">\r\n    <el-row class=\"pa-20\">\r\n      <el-card class=\"table-card mt-20\">\r\n        <el-row  class=\"clearfix\">\r\n          <el-row class=\"fl\">\r\n            <span class=\"title\">疫区设置：{{ itemTitle }}</span>\r\n          </el-row>\r\n        </el-row>\r\n        <div class=\"deliverySetting\">\r\n          <div class=\"deliverySetting-table\" v-for=\"(item, idx) in countries\" :key=\"idx\">\r\n            <div class=\"table-body\" v-for=\"(pro, idx2) in item.pros\" :key=\"idx2\">\r\n              <div class=\"first-col\">\r\n                <span\r\n                  v-if=\"idx2 == 0\"\r\n                  style=\"display: inline-block; line-height: 30px; cursor: pointer; \"\r\n                >\r\n                  <el-checkbox @change=\"handleChecked('country', item)\" :label=\"item.cname\" v-model=\"item.checked\" :key=\"item.cid\">{{ item.cname }}</el-checkbox>\r\n                </span>\r\n              </div>\r\n              <div class=\"width120\">\r\n                <span style=\"display: inline-block; line-height: 30px; cursor: pointer; \">\r\n                  <el-checkbox @change=\"handleChecked('pro', pro)\" :label=\"pro.pname\" v-model=\"pro.checked\" :key=\"pro.pid\">{{ pro.pname }}</el-checkbox>\r\n                </span>\r\n              </div>\r\n              <div class=\"width265\">\r\n                <el-checkbox\r\n                  v-for=\"c in pro.cities\"\r\n                  v-model=\"c.checked\"\r\n                  :label=\"c.cityName\"\r\n                  :key=\"c.cityId\"\r\n                  @change=\"handleChecked('city', c)\"\r\n                >{{c.cityName}}</el-checkbox>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </el-card>\r\n    </el-row>\r\n  </app-scroll-box>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"deliverySetting\",\r\n  components: {},\r\n  props: {},\r\n  data() {\r\n    return {\r\n      itemTitle: \"\",\r\n      itemId: 0,\r\n      countries: [\r\n        {\r\n          cid: 1,\r\n          cname: \"中国\",\r\n          pid: \"1\",\r\n          pname: \"广东\",\r\n          cityId: 1,\r\n          cityName: \"深圳\"\r\n        },\r\n        {\r\n          cid: 1,\r\n          cname: \"中国\",\r\n          pid: \"1\",\r\n          pname: \"广东\",\r\n          cityId: 2,\r\n          cityName: \"肇庆\"\r\n        },\r\n        {\r\n          cid: 1,\r\n          cname: \"中国\",\r\n          pid: \"2\",\r\n          pname: \"湖北\",\r\n          cityId: 3,\r\n          cityName: \"武汉\"\r\n        },\r\n        {\r\n          cid: 1,\r\n          cname: \"中国\",\r\n          pid: \"2\",\r\n          pname: \"湖北\",\r\n          cityId: 4,\r\n          cityName: \"咸宁\"\r\n        },\r\n        {\r\n          cid: 1,\r\n          cname: \"中国\",\r\n          pid: \"2\",\r\n          pname: \"湖北\",\r\n          cityId: 5,\r\n          cityName: \"恩施\"\r\n        },\r\n        {\r\n          cid: 2,\r\n          cname: \"美国\",\r\n          pid: \"3\",\r\n          pname: \"usa省州1\",\r\n          cityId: 6,\r\n          cityName: \"usa-city-1\"\r\n        },\r\n        {\r\n          cid: 2,\r\n          cname: \"美国\",\r\n          pid: \"3\",\r\n          pname: \"usa省州1\",\r\n          cityId: 7,\r\n          cityName: \"usa-city-2\"\r\n        },\r\n        {\r\n          cid: 2,\r\n          cname: \"美国\",\r\n          pid: \"3\",\r\n          pname: \"usa省州1\",\r\n          cityId: 8,\r\n          cityName: \"usa-city-3\"\r\n        },\r\n        {\r\n          cid: 2,\r\n          cname: \"美国\",\r\n          pid: \"4\",\r\n          pname: \"usa省州2\",\r\n          cityId: 9,\r\n          cityName: \"usa-city-4\"\r\n        },\r\n        {\r\n          cid: 2,\r\n          cname: \"美国\",\r\n          pid: \"4\",\r\n          pname: \"usa省州2\",\r\n          cityId: 10,\r\n          cityName: \"usa-city-5\"\r\n        }\r\n      ],\r\n      checkedCities: [1, 4, 9, 10]\r\n    };\r\n  },\r\n  computed: {},\r\n  methods: {\r\n    initPage() {\r\n      let { itemId, itemTitle } = this.$route.query;\r\n      this.itemId = itemId;\r\n      this.itemTitle = itemTitle;\r\n \r\n      this.initAreaData();\r\n    },\r\n    //初始化数据\r\n    initAreaData() {\r\n      this.countries = this.countries.map(item => {\r\n        let res = item;\r\n        if (this.checkedCities.includes(item.cityId)) {\r\n          res.checked = true;\r\n        } else {\r\n          res.checked = false;\r\n        }\r\n        return res;\r\n      });\r\n \r\n      let resCities = [];\r\n      this.countries.forEach(item => {\r\n        let obj = {};\r\n        let existsCountry = resCities.find(c => {\r\n          return c.cid == item.cid;\r\n        });\r\n \r\n        if (existsCountry) {\r\n          obj = existsCountry;\r\n        } else {\r\n          obj.cid = item.cid;\r\n          obj.cname = item.cname;\r\n        }\r\n \r\n        obj.checked = false;\r\n \r\n        if (!obj.pros) {\r\n          obj.pros = [];\r\n        }\r\n \r\n        let existsPro = obj.pros.find(c => {\r\n          return c.pid == item.pid;\r\n        });\r\n \r\n        if (!existsPro) {\r\n          existsPro = {\r\n            pid: item.pid,\r\n            pname: item.pname,\r\n            checked: false\r\n          };\r\n          obj.pros.push(existsPro);\r\n        }\r\n \r\n        if (!existsPro.cities) {\r\n          existsPro.cities = [];\r\n        }\r\n \r\n        existsPro.cities.push({\r\n          cityId: item.cityId,\r\n          cityName: item.cityName,\r\n          checked: item.checked\r\n        });\r\n \r\n        if (!existsCountry) {\r\n          resCities.push(obj);\r\n        }\r\n      });\r\n \r\n      this.countries = resCities;\r\n      this.opreationData()\r\n    },\r\n    //操作数据\r\n    opreationData() {\r\n      this.countries.forEach(c => {\r\n        c.pros.forEach(p => {\r\n          if(p.cities && p.cities.length > 0){\r\n            p.checked = p.cities.every(p => p.checked)\r\n          }\r\n        })\r\n        \r\n        if(c.pros && c.pros.length > 0){\r\n          c.checked = c.pros.every(p => p.checked)\r\n        }\r\n      })\r\n    },\r\n    handleChecked(level, item) {\r\n      let isChecked = item.checked\r\n      switch(level){\r\n        case \"country\":\r\n          if(item && item.pros){\r\n            item.pros.forEach(p => {\r\n              if(p.cities){\r\n                p.cities.forEach(c => {\r\n                  c.checked = isChecked\r\n                })\r\n              }\r\n            })\r\n          }\r\n          break;\r\n        case \"pro\":\r\n          if(item && item.cities){\r\n            item.cities.forEach(c => {\r\n              c.checked = isChecked\r\n            })\r\n          }\r\n          break;\r\n        case \"city\":\r\n          break;\r\n      }\r\n      this.opreationData()\r\n    }\r\n  },\r\n  created: function() {},\r\n  mounted() {\r\n    this.initPage();\r\n  },\r\n  watch: {}\r\n};\r\n</script>\r\n<style>\r\n.el-checkbox__label {\r\n  padding-left: 5px;\r\n}\r\n.first-col {\r\n  padding-left: 20px;\r\n  width: 120px;\r\n}\r\n.deliverySetting {\r\n  padding: 20px 0;\r\n  position: relative;\r\n}\r\n.deliverySetting .el-table thead tr th {\r\n  font-size: 14px;\r\n}\r\n.deliverySetting .el-table tbody tr td {\r\n  vertical-align: baseline;\r\n}\r\n.deliverySetting .el-table tbody tr td p {\r\n  line-height: 30px;\r\n}\r\n.deliverySetting .el-table tbody tr td .el-checkbox-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.deliverySetting .el-table tbody tr td .el-checkbox-group label {\r\n  line-height: 30px;\r\n  margin-left: 0;\r\n}\r\n.deliverySetting .deliverySetting-table {\r\n  font-size: 14px;\r\n  color: #333;\r\n}\r\n.deliverySetting .deliverySetting-table .table-head,\r\n.deliverySetting .deliverySetting-table .table-body {\r\n  display: flex;\r\n  padding: 10px 0;\r\n}\r\n.deliverySetting .deliverySetting-table .table-head .selection,\r\n.deliverySetting .deliverySetting-table .table-body .selection {\r\n  /* width: 45px; */\r\n  text-align: center;\r\n  line-height: 36px;\r\n}\r\n.deliverySetting .deliverySetting-table .table-head .width120,\r\n.deliverySetting .deliverySetting-table .table-body .width120 {\r\n  width: 120px;\r\n}\r\n/* .deliverySetting .deliverySetting-table .table-head .width265,\r\n.deliverySetting .deliverySetting-table .table-body .width265 {\r\n  width: 265px;\r\n} */\r\n.deliverySetting .deliverySetting-table .table-head {\r\n  height: 36px;\r\n  align-items: center;\r\n  background-color: #e7f2ff;\r\n}\r\n.deliverySetting .deliverySetting-table .table-body {\r\n  border-bottom: 1px solid #e4e4e4;\r\n  color: #666;\r\n}\r\n.deliverySetting .deliverySetting-table .table-body:hover {\r\n  background-color: #f5f7fa;\r\n}\r\n/* .deliverySetting .deliverySetting-table .table-body .width265 {\r\n  display: flex;\r\n  flex-direction: column;\r\n} */\r\n.deliverySetting .deliverySetting-table .table-body .width265 label {\r\n  line-height: 30px;\r\n  margin-left: 0;\r\n  color: #666;\r\n  padding: 0 5px;\r\n}\r\n.deliverySetting .deliverySetting-table .table-body p {\r\n  line-height: 30px;\r\n}\r\n.deliverySetting .deliverySetting-btn {\r\n  /*width: 100%;*/\r\n  height: 59px;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: center;\r\n  position: absolute;\r\n  top: -55px;\r\n  right: -16px;\r\n  z-index: 100;\r\n}\r\n.deliverySetting .deliverySetting-btn .tabs-btn {\r\n  min-width: 90px;\r\n  height: 34px;\r\n  line-height: 32px;\r\n  padding: 0 10px;\r\n  color: #2387f7;\r\n  border: solid 1px #4fa2ff;\r\n  background-color: #e7f2ff;\r\n  cursor: pointer;\r\n}\r\n.deliverySetting .deliverySetting-btn .tabs-btn:nth-of-type(2) {\r\n  margin: 0 15px;\r\n}\r\n.deliverySetting .deliverySetting-btn .tabs-btn input {\r\n  border: none;\r\n  background: transparent;\r\n  color: inherit;\r\n  cursor: inherit;\r\n  outline: none;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.deliverySetting .deliverySetting-btn .tabs-btn:hover {\r\n  color: #fff;\r\n  background-color: #2387f7;\r\n}\r\n.deliverySetting .setDistributorDailog .el-input {\r\n  width: 270px;\r\n}\r\n</style>\r\n "]},"metadata":{},"sourceType":"module"}