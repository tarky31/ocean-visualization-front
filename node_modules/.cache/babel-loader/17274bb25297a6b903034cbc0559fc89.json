{"ast":null,"code":"import _objectSpread from \"D:/MyFile/WebCode/ocean-vis/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.values.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\nimport { markRaw, defineComponent, ref, effectScope, computed, watch, nextTick, onMounted, resolveComponent, openBlock, createBlock, Teleport, createVNode, Transition, withCtx, createElementVNode, normalizeClass, normalizeStyle, withModifiers, createCommentVNode, createElementBlock, Fragment, resolveDynamicComponent, renderList, withDirectives, vShow, renderSlot } from 'vue';\nimport { isNumber, useEventListener } from '@vueuse/core';\nimport { throttle } from 'lodash-unified';\nimport { ElIcon } from '../../icon/index.mjs';\nimport '../../../hooks/index.mjs';\nimport '../../../constants/index.mjs';\nimport '../../../utils/index.mjs';\nimport { FullScreen, ScaleToOriginal, Close, ArrowLeft, ArrowRight, ZoomOut, ZoomIn, RefreshLeft, RefreshRight } from '@element-plus/icons-vue';\nimport { imageViewerProps, imageViewerEmits } from './image-viewer.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { isFirefox } from '../../../utils/browser.mjs';\nimport { useLocale } from '../../../hooks/use-locale/index.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useZIndex } from '../../../hooks/use-z-index/index.mjs';\nimport { EVENT_CODE } from '../../../constants/aria.mjs';\nvar Mode = {\n  CONTAIN: {\n    name: \"contain\",\n    icon: markRaw(FullScreen)\n  },\n  ORIGINAL: {\n    name: \"original\",\n    icon: markRaw(ScaleToOriginal)\n  }\n};\nvar mousewheelEventName = isFirefox() ? \"DOMMouseScroll\" : \"mousewheel\";\n\nvar _sfc_main = defineComponent({\n  name: \"ElImageViewer\",\n  components: {\n    ElIcon: ElIcon,\n    Close: Close,\n    ArrowLeft: ArrowLeft,\n    ArrowRight: ArrowRight,\n    ZoomOut: ZoomOut,\n    ZoomIn: ZoomIn,\n    RefreshLeft: RefreshLeft,\n    RefreshRight: RefreshRight\n  },\n  props: imageViewerProps,\n  emits: imageViewerEmits,\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n\n    var _useLocale = useLocale(),\n        t = _useLocale.t;\n\n    var ns = useNamespace(\"image-viewer\");\n\n    var _useZIndex = useZIndex(),\n        nextZIndex = _useZIndex.nextZIndex;\n\n    var wrapper = ref();\n    var imgRefs = ref([]);\n    var scopeEventListener = effectScope();\n    var loading = ref(true);\n    var index = ref(props.initialIndex);\n    var mode = ref(Mode.CONTAIN);\n    var transform = ref({\n      scale: 1,\n      deg: 0,\n      offsetX: 0,\n      offsetY: 0,\n      enableTransition: false\n    });\n    var isSingle = computed(function () {\n      var urlList = props.urlList;\n      return urlList.length <= 1;\n    });\n    var isFirst = computed(function () {\n      return index.value === 0;\n    });\n    var isLast = computed(function () {\n      return index.value === props.urlList.length - 1;\n    });\n    var currentImg = computed(function () {\n      return props.urlList[index.value];\n    });\n    var imgStyle = computed(function () {\n      var _transform$value = transform.value,\n          scale = _transform$value.scale,\n          deg = _transform$value.deg,\n          offsetX = _transform$value.offsetX,\n          offsetY = _transform$value.offsetY,\n          enableTransition = _transform$value.enableTransition;\n      var translateX = offsetX / scale;\n      var translateY = offsetY / scale;\n\n      switch (deg % 360) {\n        case 90:\n        case -270:\n          ;\n          var _ref2 = [translateY, -translateX];\n          translateX = _ref2[0];\n          translateY = _ref2[1];\n          break;\n\n        case 180:\n        case -180:\n          ;\n          var _ref3 = [-translateX, -translateY];\n          translateX = _ref3[0];\n          translateY = _ref3[1];\n          break;\n\n        case 270:\n        case -90:\n          ;\n          var _ref4 = [-translateY, translateX];\n          translateX = _ref4[0];\n          translateY = _ref4[1];\n          break;\n      }\n\n      var style = {\n        transform: \"scale(\".concat(scale, \") rotate(\").concat(deg, \"deg) translate(\").concat(translateX, \"px, \").concat(translateY, \"px)\"),\n        transition: enableTransition ? \"transform .3s\" : \"\"\n      };\n\n      if (mode.value.name === Mode.CONTAIN.name) {\n        style.maxWidth = style.maxHeight = \"100%\";\n      }\n\n      return style;\n    });\n    var computedZIndex = computed(function () {\n      return isNumber(props.zIndex) ? props.zIndex : nextZIndex();\n    });\n\n    function hide() {\n      unregisterEventListener();\n      emit(\"close\");\n    }\n\n    function registerEventListener() {\n      var keydownHandler = throttle(function (e) {\n        switch (e.code) {\n          case EVENT_CODE.esc:\n            hide();\n            break;\n\n          case EVENT_CODE.space:\n            toggleMode();\n            break;\n\n          case EVENT_CODE.left:\n            prev();\n            break;\n\n          case EVENT_CODE.up:\n            handleActions(\"zoomIn\");\n            break;\n\n          case EVENT_CODE.right:\n            next();\n            break;\n\n          case EVENT_CODE.down:\n            handleActions(\"zoomOut\");\n            break;\n        }\n      });\n      var mousewheelHandler = throttle(function (e) {\n        var delta = e.wheelDelta ? e.wheelDelta : -e.detail;\n\n        if (delta > 0) {\n          handleActions(\"zoomIn\", {\n            zoomRate: 1.2,\n            enableTransition: false\n          });\n        } else {\n          handleActions(\"zoomOut\", {\n            zoomRate: 1.2,\n            enableTransition: false\n          });\n        }\n      });\n      scopeEventListener.run(function () {\n        useEventListener(document, \"keydown\", keydownHandler);\n        useEventListener(document, mousewheelEventName, mousewheelHandler);\n      });\n    }\n\n    function unregisterEventListener() {\n      scopeEventListener.stop();\n    }\n\n    function handleImgLoad() {\n      loading.value = false;\n    }\n\n    function handleImgError(e) {\n      loading.value = false;\n      e.target.alt = t(\"el.image.error\");\n    }\n\n    function handleMouseDown(e) {\n      if (loading.value || e.button !== 0 || !wrapper.value) return;\n      transform.value.enableTransition = false;\n      var _transform$value2 = transform.value,\n          offsetX = _transform$value2.offsetX,\n          offsetY = _transform$value2.offsetY;\n      var startX = e.pageX;\n      var startY = e.pageY;\n      var dragHandler = throttle(function (ev) {\n        transform.value = _objectSpread(_objectSpread({}, transform.value), {}, {\n          offsetX: offsetX + ev.pageX - startX,\n          offsetY: offsetY + ev.pageY - startY\n        });\n      });\n      var removeMousemove = useEventListener(document, \"mousemove\", dragHandler);\n      useEventListener(document, \"mouseup\", function () {\n        removeMousemove();\n      });\n      e.preventDefault();\n    }\n\n    function reset() {\n      transform.value = {\n        scale: 1,\n        deg: 0,\n        offsetX: 0,\n        offsetY: 0,\n        enableTransition: false\n      };\n    }\n\n    function toggleMode() {\n      if (loading.value) return;\n      var modeNames = Object.keys(Mode);\n      var modeValues = Object.values(Mode);\n      var currentMode = mode.value.name;\n      var index2 = modeValues.findIndex(function (i) {\n        return i.name === currentMode;\n      });\n      var nextIndex = (index2 + 1) % modeNames.length;\n      mode.value = Mode[modeNames[nextIndex]];\n      reset();\n    }\n\n    function prev() {\n      if (isFirst.value && !props.infinite) return;\n      var len = props.urlList.length;\n      index.value = (index.value - 1 + len) % len;\n    }\n\n    function next() {\n      if (isLast.value && !props.infinite) return;\n      var len = props.urlList.length;\n      index.value = (index.value + 1) % len;\n    }\n\n    function handleActions(action) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (loading.value) return;\n\n      var _zoomRate$rotateDeg$e = _objectSpread({\n        zoomRate: 1.4,\n        rotateDeg: 90,\n        enableTransition: true\n      }, options),\n          zoomRate = _zoomRate$rotateDeg$e.zoomRate,\n          rotateDeg = _zoomRate$rotateDeg$e.rotateDeg,\n          enableTransition = _zoomRate$rotateDeg$e.enableTransition;\n\n      switch (action) {\n        case \"zoomOut\":\n          if (transform.value.scale > 0.2) {\n            transform.value.scale = parseFloat((transform.value.scale / zoomRate).toFixed(3));\n          }\n\n          break;\n\n        case \"zoomIn\":\n          if (transform.value.scale < 7) {\n            transform.value.scale = parseFloat((transform.value.scale * zoomRate).toFixed(3));\n          }\n\n          break;\n\n        case \"clockwise\":\n          transform.value.deg += rotateDeg;\n          break;\n\n        case \"anticlockwise\":\n          transform.value.deg -= rotateDeg;\n          break;\n      }\n\n      transform.value.enableTransition = enableTransition;\n    }\n\n    watch(currentImg, function () {\n      nextTick(function () {\n        var $img = imgRefs.value[0];\n\n        if (!($img == null ? void 0 : $img.complete)) {\n          loading.value = true;\n        }\n      });\n    });\n    watch(index, function (val) {\n      reset();\n      emit(\"switch\", val);\n    });\n    onMounted(function () {\n      var _a, _b;\n\n      registerEventListener();\n      (_b = (_a = wrapper.value) == null ? void 0 : _a.focus) == null ? void 0 : _b.call(_a);\n    });\n    return {\n      index: index,\n      wrapper: wrapper,\n      imgRefs: imgRefs,\n      isSingle: isSingle,\n      isFirst: isFirst,\n      isLast: isLast,\n      currentImg: currentImg,\n      imgStyle: imgStyle,\n      mode: mode,\n      computedZIndex: computedZIndex,\n      handleActions: handleActions,\n      prev: prev,\n      next: next,\n      hide: hide,\n      toggleMode: toggleMode,\n      handleImgLoad: handleImgLoad,\n      handleImgError: handleImgError,\n      handleMouseDown: handleMouseDown,\n      ns: ns\n    };\n  }\n});\n\nvar _hoisted_1 = [\"src\"];\n\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_close = resolveComponent(\"close\");\n\n  var _component_el_icon = resolveComponent(\"el-icon\");\n\n  var _component_arrow_left = resolveComponent(\"arrow-left\");\n\n  var _component_arrow_right = resolveComponent(\"arrow-right\");\n\n  var _component_zoom_out = resolveComponent(\"zoom-out\");\n\n  var _component_zoom_in = resolveComponent(\"zoom-in\");\n\n  var _component_refresh_left = resolveComponent(\"refresh-left\");\n\n  var _component_refresh_right = resolveComponent(\"refresh-right\");\n\n  return openBlock(), createBlock(Teleport, {\n    to: \"body\",\n    disabled: !_ctx.teleported\n  }, [createVNode(Transition, {\n    name: \"viewer-fade\",\n    appear: \"\"\n  }, {\n    default: withCtx(function () {\n      return [createElementVNode(\"div\", {\n        ref: \"wrapper\",\n        tabindex: -1,\n        class: normalizeClass(_ctx.ns.e(\"wrapper\")),\n        style: normalizeStyle({\n          zIndex: _ctx.computedZIndex\n        })\n      }, [createElementVNode(\"div\", {\n        class: normalizeClass(_ctx.ns.e(\"mask\")),\n        onClick: _cache[0] || (_cache[0] = withModifiers(function ($event) {\n          return _ctx.hideOnClickModal && _ctx.hide();\n        }, [\"self\"]))\n      }, null, 2), createCommentVNode(\" CLOSE \"), createElementVNode(\"span\", {\n        class: normalizeClass([_ctx.ns.e(\"btn\"), _ctx.ns.e(\"close\")]),\n        onClick: _cache[1] || (_cache[1] = function () {\n          return _ctx.hide && _ctx.hide.apply(_ctx, arguments);\n        })\n      }, [createVNode(_component_el_icon, null, {\n        default: withCtx(function () {\n          return [createVNode(_component_close)];\n        }),\n        _: 1\n      })], 2), createCommentVNode(\" ARROW \"), !_ctx.isSingle ? (openBlock(), createElementBlock(Fragment, {\n        key: 0\n      }, [createElementVNode(\"span\", {\n        class: normalizeClass([_ctx.ns.e(\"btn\"), _ctx.ns.e(\"prev\"), _ctx.ns.is(\"disabled\", !_ctx.infinite && _ctx.isFirst)]),\n        onClick: _cache[2] || (_cache[2] = function () {\n          return _ctx.prev && _ctx.prev.apply(_ctx, arguments);\n        })\n      }, [createVNode(_component_el_icon, null, {\n        default: withCtx(function () {\n          return [createVNode(_component_arrow_left)];\n        }),\n        _: 1\n      })], 2), createElementVNode(\"span\", {\n        class: normalizeClass([_ctx.ns.e(\"btn\"), _ctx.ns.e(\"next\"), _ctx.ns.is(\"disabled\", !_ctx.infinite && _ctx.isLast)]),\n        onClick: _cache[3] || (_cache[3] = function () {\n          return _ctx.next && _ctx.next.apply(_ctx, arguments);\n        })\n      }, [createVNode(_component_el_icon, null, {\n        default: withCtx(function () {\n          return [createVNode(_component_arrow_right)];\n        }),\n        _: 1\n      })], 2)], 64)) : createCommentVNode(\"v-if\", true), createCommentVNode(\" ACTIONS \"), createElementVNode(\"div\", {\n        class: normalizeClass([_ctx.ns.e(\"btn\"), _ctx.ns.e(\"actions\")])\n      }, [createElementVNode(\"div\", {\n        class: normalizeClass(_ctx.ns.e(\"actions__inner\"))\n      }, [createVNode(_component_el_icon, {\n        onClick: _cache[4] || (_cache[4] = function ($event) {\n          return _ctx.handleActions(\"zoomOut\");\n        })\n      }, {\n        default: withCtx(function () {\n          return [createVNode(_component_zoom_out)];\n        }),\n        _: 1\n      }), createVNode(_component_el_icon, {\n        onClick: _cache[5] || (_cache[5] = function ($event) {\n          return _ctx.handleActions(\"zoomIn\");\n        })\n      }, {\n        default: withCtx(function () {\n          return [createVNode(_component_zoom_in)];\n        }),\n        _: 1\n      }), createElementVNode(\"i\", {\n        class: normalizeClass(_ctx.ns.e(\"actions__divider\"))\n      }, null, 2), createVNode(_component_el_icon, {\n        onClick: _ctx.toggleMode\n      }, {\n        default: withCtx(function () {\n          return [(openBlock(), createBlock(resolveDynamicComponent(_ctx.mode.icon)))];\n        }),\n        _: 1\n      }, 8, [\"onClick\"]), createElementVNode(\"i\", {\n        class: normalizeClass(_ctx.ns.e(\"actions__divider\"))\n      }, null, 2), createVNode(_component_el_icon, {\n        onClick: _cache[6] || (_cache[6] = function ($event) {\n          return _ctx.handleActions(\"anticlockwise\");\n        })\n      }, {\n        default: withCtx(function () {\n          return [createVNode(_component_refresh_left)];\n        }),\n        _: 1\n      }), createVNode(_component_el_icon, {\n        onClick: _cache[7] || (_cache[7] = function ($event) {\n          return _ctx.handleActions(\"clockwise\");\n        })\n      }, {\n        default: withCtx(function () {\n          return [createVNode(_component_refresh_right)];\n        }),\n        _: 1\n      })], 2)], 2), createCommentVNode(\" CANVAS \"), createElementVNode(\"div\", {\n        class: normalizeClass(_ctx.ns.e(\"canvas\"))\n      }, [(openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.urlList, function (url, i) {\n        return withDirectives((openBlock(), createElementBlock(\"img\", {\n          ref_for: true,\n          ref: function ref(el) {\n            return _ctx.imgRefs[i] = el;\n          },\n          key: url,\n          src: url,\n          style: normalizeStyle(_ctx.imgStyle),\n          class: normalizeClass(_ctx.ns.e(\"img\")),\n          onLoad: _cache[8] || (_cache[8] = function () {\n            return _ctx.handleImgLoad && _ctx.handleImgLoad.apply(_ctx, arguments);\n          }),\n          onError: _cache[9] || (_cache[9] = function () {\n            return _ctx.handleImgError && _ctx.handleImgError.apply(_ctx, arguments);\n          }),\n          onMousedown: _cache[10] || (_cache[10] = function () {\n            return _ctx.handleMouseDown && _ctx.handleMouseDown.apply(_ctx, arguments);\n          })\n        }, null, 46, _hoisted_1)), [[vShow, i === _ctx.index]]);\n      }), 128))], 2), renderSlot(_ctx.$slots, \"default\")], 6)];\n    }),\n    _: 3\n  })], 8, [\"disabled\"]);\n}\n\nvar ImageViewer = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\n\nexport { ImageViewer as default };","map":{"version":3,"mappings":"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","names":["Mode","CONTAIN","name","icon","markRaw","FullScreen","ORIGINAL","ScaleToOriginal","mousewheelEventName","isFirefox","_sfc_main","defineComponent","components","ElIcon","Close","ArrowLeft","ArrowRight","ZoomOut","ZoomIn","RefreshLeft","RefreshRight","props","imageViewerProps","emits","imageViewerEmits","setup","emit","useLocale","t","ns","useNamespace","useZIndex","nextZIndex","wrapper","ref","imgRefs","scopeEventListener","effectScope","loading","index","initialIndex","mode","transform","scale","deg","offsetX","offsetY","enableTransition","isSingle","computed","urlList","length","isFirst","value","isLast","currentImg","imgStyle","translateX","translateY","style","transition","maxWidth","maxHeight","computedZIndex","isNumber","zIndex","unregisterEventListener","keydownHandler","throttle","e","code","EVENT_CODE","esc","hide","space","toggleMode","left","prev","up","handleActions","right","next","down","mousewheelHandler","delta","wheelDelta","detail","zoomRate","run","useEventListener","document","stop","target","alt","button","startX","pageX","startY","pageY","dragHandler","ev","removeMousemove","preventDefault","modeNames","Object","keys","modeValues","values","currentMode","index2","findIndex","i","nextIndex","reset","infinite","len","action","options","rotateDeg","parseFloat","toFixed","watch","nextTick","$img","val","onMounted","registerEventListener","handleImgLoad","handleImgError","handleMouseDown","to","disabled","createVNode","appear","default","tabindex","class","_normalizeClass","createElementVNode","onClick","_createCommentVNode","createCommentVNode","key","_ctx","openBlock","ref_for","url","src","_normalizeStyle","onLoad","onError","onMousedown","_hoisted_1","renderSlot"],"sources":["../../../../../../packages/components/image-viewer/src/image-viewer.vue"],"sourcesContent":["<template>\n  <teleport to=\"body\" :disabled=\"!teleported\">\n    <transition name=\"viewer-fade\" appear>\n      <div\n        ref=\"wrapper\"\n        :tabindex=\"-1\"\n        :class=\"ns.e('wrapper')\"\n        :style=\"{ zIndex: computedZIndex }\"\n      >\n        <div :class=\"ns.e('mask')\" @click.self=\"hideOnClickModal && hide()\" />\n\n        <!-- CLOSE -->\n        <span :class=\"[ns.e('btn'), ns.e('close')]\" @click=\"hide\">\n          <el-icon><close /></el-icon>\n        </span>\n\n        <!-- ARROW -->\n        <template v-if=\"!isSingle\">\n          <span\n            :class=\"[\n              ns.e('btn'),\n              ns.e('prev'),\n              ns.is('disabled', !infinite && isFirst),\n            ]\"\n            @click=\"prev\"\n          >\n            <el-icon><arrow-left /></el-icon>\n          </span>\n          <span\n            :class=\"[\n              ns.e('btn'),\n              ns.e('next'),\n              ns.is('disabled', !infinite && isLast),\n            ]\"\n            @click=\"next\"\n          >\n            <el-icon><arrow-right /></el-icon>\n          </span>\n        </template>\n        <!-- ACTIONS -->\n        <div :class=\"[ns.e('btn'), ns.e('actions')]\">\n          <div :class=\"ns.e('actions__inner')\">\n            <el-icon @click=\"handleActions('zoomOut')\">\n              <zoom-out />\n            </el-icon>\n            <el-icon @click=\"handleActions('zoomIn')\">\n              <zoom-in />\n            </el-icon>\n            <i :class=\"ns.e('actions__divider')\"></i>\n            <el-icon @click=\"toggleMode\">\n              <component :is=\"mode.icon\" />\n            </el-icon>\n            <i :class=\"ns.e('actions__divider')\"></i>\n            <el-icon @click=\"handleActions('anticlockwise')\">\n              <refresh-left />\n            </el-icon>\n            <el-icon @click=\"handleActions('clockwise')\">\n              <refresh-right />\n            </el-icon>\n          </div>\n        </div>\n        <!-- CANVAS -->\n        <div :class=\"ns.e('canvas')\">\n          <img\n            v-for=\"(url, i) in urlList\"\n            v-show=\"i === index\"\n            :ref=\"(el) => (imgRefs[i] = el)\"\n            :key=\"url\"\n            :src=\"url\"\n            :style=\"imgStyle\"\n            :class=\"ns.e('img')\"\n            @load=\"handleImgLoad\"\n            @error=\"handleImgError\"\n            @mousedown=\"handleMouseDown\"\n          />\n        </div>\n        <slot />\n      </div>\n    </transition>\n  </teleport>\n</template>\n\n<script lang=\"ts\">\nimport {\n  defineComponent,\n  computed,\n  ref,\n  onMounted,\n  watch,\n  nextTick,\n  effectScope,\n  markRaw,\n} from 'vue'\nimport { useEventListener, isNumber } from '@vueuse/core'\nimport { throttle } from 'lodash-unified'\nimport ElIcon from '@element-plus/components/icon'\nimport { useLocale, useNamespace, useZIndex } from '@element-plus/hooks'\nimport { EVENT_CODE } from '@element-plus/constants'\nimport { isFirefox } from '@element-plus/utils'\nimport {\n  Close,\n  ArrowLeft,\n  ArrowRight,\n  ZoomOut,\n  ZoomIn,\n  RefreshLeft,\n  RefreshRight,\n  FullScreen,\n  ScaleToOriginal,\n} from '@element-plus/icons-vue'\nimport { imageViewerProps, imageViewerEmits } from './image-viewer'\n\nimport type { CSSProperties } from 'vue'\n\nconst Mode = {\n  CONTAIN: {\n    name: 'contain',\n    icon: markRaw(FullScreen),\n  },\n  ORIGINAL: {\n    name: 'original',\n    icon: markRaw(ScaleToOriginal),\n  },\n}\n\nconst mousewheelEventName = isFirefox() ? 'DOMMouseScroll' : 'mousewheel'\nexport type ImageViewerAction =\n  | 'zoomIn'\n  | 'zoomOut'\n  | 'clockwise'\n  | 'anticlockwise'\n\nexport default defineComponent({\n  name: 'ElImageViewer',\n  components: {\n    ElIcon,\n    Close,\n    ArrowLeft,\n    ArrowRight,\n    ZoomOut,\n    ZoomIn,\n    RefreshLeft,\n    RefreshRight,\n  },\n  props: imageViewerProps,\n  emits: imageViewerEmits,\n\n  setup(props, { emit }) {\n    const { t } = useLocale()\n    const ns = useNamespace('image-viewer')\n    const { nextZIndex } = useZIndex()\n    const wrapper = ref<HTMLDivElement>()\n    const imgRefs = ref<any[]>([])\n\n    const scopeEventListener = effectScope()\n\n    const loading = ref(true)\n    const index = ref(props.initialIndex)\n    const mode = ref(Mode.CONTAIN)\n    const transform = ref({\n      scale: 1,\n      deg: 0,\n      offsetX: 0,\n      offsetY: 0,\n      enableTransition: false,\n    })\n\n    const isSingle = computed(() => {\n      const { urlList } = props\n      return urlList.length <= 1\n    })\n\n    const isFirst = computed(() => {\n      return index.value === 0\n    })\n\n    const isLast = computed(() => {\n      return index.value === props.urlList.length - 1\n    })\n\n    const currentImg = computed(() => {\n      return props.urlList[index.value]\n    })\n\n    const imgStyle = computed(() => {\n      const { scale, deg, offsetX, offsetY, enableTransition } = transform.value\n      let translateX = offsetX / scale\n      let translateY = offsetY / scale\n\n      switch (deg % 360) {\n        case 90:\n        case -270:\n          ;[translateX, translateY] = [translateY, -translateX]\n          break\n        case 180:\n        case -180:\n          ;[translateX, translateY] = [-translateX, -translateY]\n          break\n        case 270:\n        case -90:\n          ;[translateX, translateY] = [-translateY, translateX]\n          break\n      }\n\n      const style: CSSProperties = {\n        transform: `scale(${scale}) rotate(${deg}deg) translate(${translateX}px, ${translateY}px)`,\n        transition: enableTransition ? 'transform .3s' : '',\n      }\n      if (mode.value.name === Mode.CONTAIN.name) {\n        style.maxWidth = style.maxHeight = '100%'\n      }\n      return style\n    })\n\n    const computedZIndex = computed(() => {\n      return isNumber(props.zIndex) ? props.zIndex : nextZIndex()\n    })\n\n    function hide() {\n      unregisterEventListener()\n      emit('close')\n    }\n\n    function registerEventListener() {\n      const keydownHandler = throttle((e: KeyboardEvent) => {\n        switch (e.code) {\n          // ESC\n          case EVENT_CODE.esc:\n            hide()\n            break\n          // SPACE\n          case EVENT_CODE.space:\n            toggleMode()\n            break\n          // LEFT_ARROW\n          case EVENT_CODE.left:\n            prev()\n            break\n          // UP_ARROW\n          case EVENT_CODE.up:\n            handleActions('zoomIn')\n            break\n          // RIGHT_ARROW\n          case EVENT_CODE.right:\n            next()\n            break\n          // DOWN_ARROW\n          case EVENT_CODE.down:\n            handleActions('zoomOut')\n            break\n        }\n      })\n      const mousewheelHandler = throttle(\n        (e: WheelEvent | any /* TODO: wheelDelta is deprecated */) => {\n          const delta = e.wheelDelta ? e.wheelDelta : -e.detail\n          if (delta > 0) {\n            handleActions('zoomIn', {\n              zoomRate: 1.2,\n              enableTransition: false,\n            })\n          } else {\n            handleActions('zoomOut', {\n              zoomRate: 1.2,\n              enableTransition: false,\n            })\n          }\n        }\n      )\n\n      scopeEventListener.run(() => {\n        useEventListener(document, 'keydown', keydownHandler)\n        useEventListener(document, mousewheelEventName, mousewheelHandler)\n      })\n    }\n\n    function unregisterEventListener() {\n      scopeEventListener.stop()\n    }\n\n    function handleImgLoad() {\n      loading.value = false\n    }\n\n    function handleImgError(e: Event) {\n      loading.value = false\n      ;(e.target as HTMLImageElement).alt = t('el.image.error')\n    }\n\n    function handleMouseDown(e: MouseEvent) {\n      if (loading.value || e.button !== 0 || !wrapper.value) return\n      transform.value.enableTransition = false\n\n      const { offsetX, offsetY } = transform.value\n      const startX = e.pageX\n      const startY = e.pageY\n\n      const dragHandler = throttle((ev: MouseEvent) => {\n        transform.value = {\n          ...transform.value,\n          offsetX: offsetX + ev.pageX - startX,\n          offsetY: offsetY + ev.pageY - startY,\n        }\n      })\n      const removeMousemove = useEventListener(\n        document,\n        'mousemove',\n        dragHandler\n      )\n      useEventListener(document, 'mouseup', () => {\n        removeMousemove()\n      })\n\n      e.preventDefault()\n    }\n\n    function reset() {\n      transform.value = {\n        scale: 1,\n        deg: 0,\n        offsetX: 0,\n        offsetY: 0,\n        enableTransition: false,\n      }\n    }\n\n    function toggleMode() {\n      if (loading.value) return\n\n      const modeNames = Object.keys(Mode)\n      const modeValues = Object.values(Mode)\n      const currentMode = mode.value.name\n      const index = modeValues.findIndex((i) => i.name === currentMode)\n      const nextIndex = (index + 1) % modeNames.length\n      mode.value = Mode[modeNames[nextIndex]]\n      reset()\n    }\n\n    function prev() {\n      if (isFirst.value && !props.infinite) return\n      const len = props.urlList.length\n      index.value = (index.value - 1 + len) % len\n    }\n\n    function next() {\n      if (isLast.value && !props.infinite) return\n      const len = props.urlList.length\n      index.value = (index.value + 1) % len\n    }\n\n    function handleActions(action: ImageViewerAction, options = {}) {\n      if (loading.value) return\n      const { zoomRate, rotateDeg, enableTransition } = {\n        zoomRate: 1.4,\n        rotateDeg: 90,\n        enableTransition: true,\n        ...options,\n      }\n      switch (action) {\n        case 'zoomOut':\n          if (transform.value.scale > 0.2) {\n            transform.value.scale = parseFloat(\n              (transform.value.scale / zoomRate).toFixed(3)\n            )\n          }\n          break\n        case 'zoomIn':\n          if (transform.value.scale < 7) {\n            transform.value.scale = parseFloat(\n              (transform.value.scale * zoomRate).toFixed(3)\n            )\n          }\n          break\n        case 'clockwise':\n          transform.value.deg += rotateDeg\n          break\n        case 'anticlockwise':\n          transform.value.deg -= rotateDeg\n          break\n      }\n      transform.value.enableTransition = enableTransition\n    }\n\n    watch(currentImg, () => {\n      nextTick(() => {\n        const $img = imgRefs.value[0]\n        if (!$img?.complete) {\n          loading.value = true\n        }\n      })\n    })\n\n    watch(index, (val) => {\n      reset()\n      emit('switch', val)\n    })\n\n    onMounted(() => {\n      registerEventListener()\n      // add tabindex then wrapper can be focusable via Javascript\n      // focus wrapper so arrow key can't cause inner scroll behavior underneath\n      wrapper.value?.focus?.()\n    })\n\n    return {\n      index,\n      wrapper,\n      imgRefs,\n      isSingle,\n      isFirst,\n      isLast,\n      currentImg,\n      imgStyle,\n      mode,\n      computedZIndex,\n      handleActions,\n      prev,\n      next,\n      hide,\n      toggleMode,\n      handleImgLoad,\n      handleImgError,\n      handleMouseDown,\n      ns,\n    }\n  },\n})\n</script>\n"]},"metadata":{},"sourceType":"module"}