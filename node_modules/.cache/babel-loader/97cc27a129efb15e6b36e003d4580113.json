{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport { defineComponent, computed, ref, watch, nextTick, onMounted, resolveComponent, openBlock, createElementBlock, normalizeClass, withModifiers, createElementVNode, withKeys, createBlock, withCtx, resolveDynamicComponent, createCommentVNode, toDisplayString, normalizeStyle, Fragment, createVNode } from 'vue';\nimport { isPromise } from '@vue/shared';\nimport '../../../utils/index.mjs';\nimport { ElIcon } from '../../icon/index.mjs';\nimport { Loading } from '@element-plus/icons-vue';\nimport '../../../constants/index.mjs';\nimport '../../../hooks/index.mjs';\nimport { switchProps, switchEmits } from './switch.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useFormItem } from '../../../hooks/use-form-item/index.mjs';\nimport { useDisabled, useSize } from '../../../hooks/use-common-props/index.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { UPDATE_MODEL_EVENT, CHANGE_EVENT, INPUT_EVENT } from '../../../constants/event.mjs';\nimport { isBoolean } from '@vueuse/core';\nimport { throwError, debugWarn } from '../../../utils/error.mjs';\nvar COMPONENT_NAME = \"ElSwitch\";\n\nvar _sfc_main = defineComponent({\n  name: COMPONENT_NAME,\n  components: {\n    ElIcon: ElIcon,\n    Loading: Loading\n  },\n  props: switchProps,\n  emits: switchEmits,\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n\n    var _useFormItem = useFormItem(),\n        formItem = _useFormItem.formItem;\n\n    var switchDisabled = useDisabled(computed(function () {\n      return props.loading;\n    }));\n    var ns = useNamespace(\"switch\");\n    var switchSize = useSize();\n    var isModelValue = ref(props.modelValue !== false);\n    var input = ref();\n    var core = ref();\n    var switchKls = computed(function () {\n      return [ns.b(), ns.m(switchSize.value), ns.is(\"disabled\", switchDisabled.value), ns.is(\"checked\", checked.value)];\n    });\n    watch(function () {\n      return props.modelValue;\n    }, function () {\n      isModelValue.value = true;\n    });\n    watch(function () {\n      return props.value;\n    }, function () {\n      isModelValue.value = false;\n    });\n    var actualValue = computed(function () {\n      return isModelValue.value ? props.modelValue : props.value;\n    });\n    var checked = computed(function () {\n      return actualValue.value === props.activeValue;\n    });\n\n    if (![props.activeValue, props.inactiveValue].includes(actualValue.value)) {\n      emit(UPDATE_MODEL_EVENT, props.inactiveValue);\n      emit(CHANGE_EVENT, props.inactiveValue);\n      emit(INPUT_EVENT, props.inactiveValue);\n    }\n\n    watch(checked, function () {\n      var _a;\n\n      input.value.checked = checked.value;\n\n      if (props.activeColor || props.inactiveColor) {\n        setBackgroundColor();\n      }\n\n      if (props.validateEvent) {\n        (_a = formItem == null ? void 0 : formItem.validate) == null ? void 0 : _a.call(formItem, \"change\");\n      }\n    });\n\n    var handleChange = function handleChange() {\n      var val = checked.value ? props.inactiveValue : props.activeValue;\n      emit(UPDATE_MODEL_EVENT, val);\n      emit(CHANGE_EVENT, val);\n      emit(INPUT_EVENT, val);\n      nextTick(function () {\n        input.value.checked = checked.value;\n      });\n    };\n\n    var switchValue = function switchValue() {\n      if (switchDisabled.value) return;\n      var beforeChange = props.beforeChange;\n\n      if (!beforeChange) {\n        handleChange();\n        return;\n      }\n\n      var shouldChange = beforeChange();\n      var isExpectType = [isPromise(shouldChange), isBoolean(shouldChange)].some(function (i) {\n        return i;\n      });\n\n      if (!isExpectType) {\n        throwError(COMPONENT_NAME, \"beforeChange must return type `Promise<boolean>` or `boolean`\");\n      }\n\n      if (isPromise(shouldChange)) {\n        shouldChange.then(function (result) {\n          if (result) {\n            handleChange();\n          }\n        }).catch(function (e) {\n          debugWarn(COMPONENT_NAME, \"some error occurred: \".concat(e));\n        });\n      } else if (shouldChange) {\n        handleChange();\n      }\n    };\n\n    var setBackgroundColor = function setBackgroundColor() {\n      var newColor = checked.value ? props.activeColor : props.inactiveColor;\n      var coreEl = core.value;\n      if (props.borderColor) coreEl.style.borderColor = props.borderColor;else if (!props.borderColor) coreEl.style.borderColor = newColor;\n      coreEl.style.backgroundColor = newColor;\n      coreEl.children[0].style.color = newColor;\n    };\n\n    var focus = function focus() {\n      var _a, _b;\n\n      (_b = (_a = input.value) == null ? void 0 : _a.focus) == null ? void 0 : _b.call(_a);\n    };\n\n    onMounted(function () {\n      if (props.activeColor || props.inactiveColor || props.borderColor) {\n        setBackgroundColor();\n      }\n\n      input.value.checked = checked.value;\n    });\n    return {\n      ns: ns,\n      input: input,\n      core: core,\n      switchDisabled: switchDisabled,\n      checked: checked,\n      switchKls: switchKls,\n      handleChange: handleChange,\n      switchValue: switchValue,\n      focus: focus\n    };\n  }\n});\n\nvar _hoisted_1 = [\"aria-checked\", \"aria-disabled\"];\nvar _hoisted_2 = [\"id\", \"name\", \"true-value\", \"false-value\", \"disabled\"];\nvar _hoisted_3 = [\"aria-hidden\"];\nvar _hoisted_4 = [\"aria-hidden\"];\nvar _hoisted_5 = [\"aria-hidden\"];\nvar _hoisted_6 = [\"aria-hidden\"];\n\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_el_icon = resolveComponent(\"el-icon\");\n\n  var _component_loading = resolveComponent(\"loading\");\n\n  return openBlock(), createElementBlock(\"div\", {\n    class: normalizeClass(_ctx.switchKls),\n    role: \"switch\",\n    \"aria-checked\": _ctx.checked,\n    \"aria-disabled\": _ctx.switchDisabled,\n    onClick: _cache[2] || (_cache[2] = withModifiers(function () {\n      return _ctx.switchValue && _ctx.switchValue.apply(_ctx, arguments);\n    }, [\"prevent\"]))\n  }, [createElementVNode(\"input\", {\n    id: _ctx.id,\n    ref: \"input\",\n    class: normalizeClass(_ctx.ns.e(\"input\")),\n    type: \"checkbox\",\n    name: _ctx.name,\n    \"true-value\": _ctx.activeValue,\n    \"false-value\": _ctx.inactiveValue,\n    disabled: _ctx.switchDisabled,\n    onChange: _cache[0] || (_cache[0] = function () {\n      return _ctx.handleChange && _ctx.handleChange.apply(_ctx, arguments);\n    }),\n    onKeydown: _cache[1] || (_cache[1] = withKeys(function () {\n      return _ctx.switchValue && _ctx.switchValue.apply(_ctx, arguments);\n    }, [\"enter\"]))\n  }, null, 42, _hoisted_2), !_ctx.inlinePrompt && (_ctx.inactiveIcon || _ctx.inactiveText) ? (openBlock(), createElementBlock(\"span\", {\n    key: 0,\n    class: normalizeClass([_ctx.ns.e(\"label\"), _ctx.ns.em(\"label\", \"left\"), _ctx.ns.is(\"active\", !_ctx.checked)])\n  }, [_ctx.inactiveIcon ? (openBlock(), createBlock(_component_el_icon, {\n    key: 0\n  }, {\n    default: withCtx(function () {\n      return [(openBlock(), createBlock(resolveDynamicComponent(_ctx.inactiveIcon)))];\n    }),\n    _: 1\n  })) : createCommentVNode(\"v-if\", true), !_ctx.inactiveIcon && _ctx.inactiveText ? (openBlock(), createElementBlock(\"span\", {\n    key: 1,\n    \"aria-hidden\": _ctx.checked\n  }, toDisplayString(_ctx.inactiveText), 9, _hoisted_3)) : createCommentVNode(\"v-if\", true)], 2)) : createCommentVNode(\"v-if\", true), createElementVNode(\"span\", {\n    ref: \"core\",\n    class: normalizeClass(_ctx.ns.e(\"core\")),\n    style: normalizeStyle({\n      width: (_ctx.width || 40) + \"px\"\n    })\n  }, [_ctx.inlinePrompt ? (openBlock(), createElementBlock(\"div\", {\n    key: 0,\n    class: normalizeClass(_ctx.ns.e(\"inner\"))\n  }, [_ctx.activeIcon || _ctx.inactiveIcon ? (openBlock(), createElementBlock(Fragment, {\n    key: 0\n  }, [_ctx.activeIcon ? (openBlock(), createBlock(_component_el_icon, {\n    key: 0,\n    class: normalizeClass([_ctx.ns.is(\"icon\"), _ctx.checked ? _ctx.ns.is(\"show\") : _ctx.ns.is(\"hide\")])\n  }, {\n    default: withCtx(function () {\n      return [(openBlock(), createBlock(resolveDynamicComponent(_ctx.activeIcon)))];\n    }),\n    _: 1\n  }, 8, [\"class\"])) : createCommentVNode(\"v-if\", true), _ctx.inactiveIcon ? (openBlock(), createBlock(_component_el_icon, {\n    key: 1,\n    class: normalizeClass([_ctx.ns.is(\"icon\"), !_ctx.checked ? _ctx.ns.is(\"show\") : _ctx.ns.is(\"hide\")])\n  }, {\n    default: withCtx(function () {\n      return [(openBlock(), createBlock(resolveDynamicComponent(_ctx.inactiveIcon)))];\n    }),\n    _: 1\n  }, 8, [\"class\"])) : createCommentVNode(\"v-if\", true)], 64)) : _ctx.activeText || _ctx.inactiveIcon ? (openBlock(), createElementBlock(Fragment, {\n    key: 1\n  }, [_ctx.activeText ? (openBlock(), createElementBlock(\"span\", {\n    key: 0,\n    class: normalizeClass([_ctx.ns.is(\"text\"), _ctx.checked ? _ctx.ns.is(\"show\") : _ctx.ns.is(\"hide\")]),\n    \"aria-hidden\": !_ctx.checked\n  }, toDisplayString(_ctx.activeText.substring(0, 3)), 11, _hoisted_4)) : createCommentVNode(\"v-if\", true), _ctx.inactiveText ? (openBlock(), createElementBlock(\"span\", {\n    key: 1,\n    class: normalizeClass([_ctx.ns.is(\"text\"), !_ctx.checked ? _ctx.ns.is(\"show\") : _ctx.ns.is(\"hide\")]),\n    \"aria-hidden\": _ctx.checked\n  }, toDisplayString(_ctx.inactiveText.substring(0, 3)), 11, _hoisted_5)) : createCommentVNode(\"v-if\", true)], 64)) : createCommentVNode(\"v-if\", true)], 2)) : createCommentVNode(\"v-if\", true), createElementVNode(\"div\", {\n    class: normalizeClass(_ctx.ns.e(\"action\"))\n  }, [_ctx.loading ? (openBlock(), createBlock(_component_el_icon, {\n    key: 0,\n    class: normalizeClass(_ctx.ns.is(\"loading\"))\n  }, {\n    default: withCtx(function () {\n      return [createVNode(_component_loading)];\n    }),\n    _: 1\n  }, 8, [\"class\"])) : createCommentVNode(\"v-if\", true)], 2)], 6), !_ctx.inlinePrompt && (_ctx.activeIcon || _ctx.activeText) ? (openBlock(), createElementBlock(\"span\", {\n    key: 1,\n    class: normalizeClass([_ctx.ns.e(\"label\"), _ctx.ns.em(\"label\", \"right\"), _ctx.ns.is(\"active\", _ctx.checked)])\n  }, [_ctx.activeIcon ? (openBlock(), createBlock(_component_el_icon, {\n    key: 0\n  }, {\n    default: withCtx(function () {\n      return [(openBlock(), createBlock(resolveDynamicComponent(_ctx.activeIcon)))];\n    }),\n    _: 1\n  })) : createCommentVNode(\"v-if\", true), !_ctx.activeIcon && _ctx.activeText ? (openBlock(), createElementBlock(\"span\", {\n    key: 1,\n    \"aria-hidden\": !_ctx.checked\n  }, toDisplayString(_ctx.activeText), 9, _hoisted_6)) : createCommentVNode(\"v-if\", true)], 2)) : createCommentVNode(\"v-if\", true)], 10, _hoisted_1);\n}\n\nvar Switch = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\n\nexport { Switch as default };","map":{"version":3,"mappings":"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","names":["COMPONENT_NAME","_sfc_main","defineComponent","name","components","ElIcon","Loading","props","switchProps","emits","switchEmits","setup","emit","useFormItem","formItem","switchDisabled","useDisabled","computed","loading","ns","useNamespace","switchSize","useSize","isModelValue","ref","modelValue","input","core","switchKls","b","m","value","is","checked","watch","actualValue","activeValue","inactiveValue","includes","UPDATE_MODEL_EVENT","CHANGE_EVENT","INPUT_EVENT","setBackgroundColor","val","nextTick","switchValue","handleChange","shouldChange","beforeChange","isPromise","isBoolean","some","throwError","catch","debugWarn","newColor","coreEl","style","borderColor","backgroundColor","onMounted","focus","class","role","onClick","createElementVNode","id","type","disabled","onChange","_cache","_hoisted_2","key","_ctx","e","default","createCommentVNode","width","_createElementBlock","_component_el_icon","toDisplayString","_createCommentVNode","_openBlock"],"sources":["../../../../../../packages/components/switch/src/switch.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"switchKls\"\n    role=\"switch\"\n    :aria-checked=\"checked\"\n    :aria-disabled=\"switchDisabled\"\n    @click.prevent=\"switchValue\"\n  >\n    <input\n      :id=\"id\"\n      ref=\"input\"\n      :class=\"ns.e('input')\"\n      type=\"checkbox\"\n      :name=\"name\"\n      :true-value=\"activeValue\"\n      :false-value=\"inactiveValue\"\n      :disabled=\"switchDisabled\"\n      @change=\"handleChange\"\n      @keydown.enter=\"switchValue\"\n    />\n    <span\n      v-if=\"!inlinePrompt && (inactiveIcon || inactiveText)\"\n      :class=\"[\n        ns.e('label'),\n        ns.em('label', 'left'),\n        ns.is('active', !checked),\n      ]\"\n    >\n      <el-icon v-if=\"inactiveIcon\"><component :is=\"inactiveIcon\" /></el-icon>\n      <span v-if=\"!inactiveIcon && inactiveText\" :aria-hidden=\"checked\">{{\n        inactiveText\n      }}</span>\n    </span>\n    <span\n      ref=\"core\"\n      :class=\"ns.e('core')\"\n      :style=\"{ width: (width || 40) + 'px' }\"\n    >\n      <div v-if=\"inlinePrompt\" :class=\"ns.e('inner')\">\n        <template v-if=\"activeIcon || inactiveIcon\">\n          <el-icon\n            v-if=\"activeIcon\"\n            :class=\"[ns.is('icon'), checked ? ns.is('show') : ns.is('hide')]\"\n          >\n            <component :is=\"activeIcon\" />\n          </el-icon>\n          <el-icon\n            v-if=\"inactiveIcon\"\n            :class=\"[ns.is('icon'), !checked ? ns.is('show') : ns.is('hide')]\"\n          >\n            <component :is=\"inactiveIcon\" />\n          </el-icon>\n        </template>\n        <template v-else-if=\"activeText || inactiveIcon\">\n          <span\n            v-if=\"activeText\"\n            :class=\"[ns.is('text'), checked ? ns.is('show') : ns.is('hide')]\"\n            :aria-hidden=\"!checked\"\n          >\n            {{ activeText.substring(0, 3) }}\n          </span>\n          <span\n            v-if=\"inactiveText\"\n            :class=\"[ns.is('text'), !checked ? ns.is('show') : ns.is('hide')]\"\n            :aria-hidden=\"checked\"\n          >\n            {{ inactiveText.substring(0, 3) }}\n          </span>\n        </template>\n      </div>\n      <div :class=\"ns.e('action')\">\n        <el-icon v-if=\"loading\" :class=\"ns.is('loading')\"><loading /></el-icon>\n      </div>\n    </span>\n    <span\n      v-if=\"!inlinePrompt && (activeIcon || activeText)\"\n      :class=\"[\n        ns.e('label'),\n        ns.em('label', 'right'),\n        ns.is('active', checked),\n      ]\"\n    >\n      <el-icon v-if=\"activeIcon\"><component :is=\"activeIcon\" /></el-icon>\n      <span v-if=\"!activeIcon && activeText\" :aria-hidden=\"!checked\">{{\n        activeText\n      }}</span>\n    </span>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, onMounted, ref, nextTick, watch } from 'vue'\nimport { isPromise } from '@vue/shared'\nimport { isBoolean, throwError, debugWarn } from '@element-plus/utils'\nimport ElIcon from '@element-plus/components/icon'\nimport { Loading } from '@element-plus/icons-vue'\nimport {\n  UPDATE_MODEL_EVENT,\n  CHANGE_EVENT,\n  INPUT_EVENT,\n} from '@element-plus/constants'\nimport {\n  useDisabled,\n  useFormItem,\n  useNamespace,\n  useSize,\n} from '@element-plus/hooks'\nimport { switchProps, switchEmits } from './switch'\n\nconst COMPONENT_NAME = 'ElSwitch'\n\nexport default defineComponent({\n  name: COMPONENT_NAME,\n  components: { ElIcon, Loading },\n\n  props: switchProps,\n  emits: switchEmits,\n\n  setup(props, { emit }) {\n    const { formItem } = useFormItem()\n    const switchDisabled = useDisabled(computed(() => props.loading))\n    const ns = useNamespace('switch')\n\n    const switchSize = useSize()\n    const isModelValue = ref(props.modelValue !== false)\n    const input = ref<HTMLInputElement>()\n    const core = ref<HTMLSpanElement>()\n\n    const switchKls = computed(() => [\n      ns.b(),\n      ns.m(switchSize.value),\n      ns.is('disabled', switchDisabled.value),\n      ns.is('checked', checked.value),\n    ])\n\n    watch(\n      () => props.modelValue,\n      () => {\n        isModelValue.value = true\n      }\n    )\n\n    watch(\n      () => props.value,\n      () => {\n        isModelValue.value = false\n      }\n    )\n\n    const actualValue = computed(() => {\n      return isModelValue.value ? props.modelValue : props.value\n    })\n\n    const checked = computed(() => actualValue.value === props.activeValue)\n\n    if (![props.activeValue, props.inactiveValue].includes(actualValue.value)) {\n      emit(UPDATE_MODEL_EVENT, props.inactiveValue)\n      emit(CHANGE_EVENT, props.inactiveValue)\n      emit(INPUT_EVENT, props.inactiveValue)\n    }\n\n    watch(checked, () => {\n      input.value!.checked = checked.value\n\n      if (props.activeColor || props.inactiveColor) {\n        setBackgroundColor()\n      }\n\n      if (props.validateEvent) {\n        formItem?.validate?.('change')\n      }\n    })\n\n    const handleChange = (): void => {\n      const val = checked.value ? props.inactiveValue : props.activeValue\n      emit(UPDATE_MODEL_EVENT, val)\n      emit(CHANGE_EVENT, val)\n      emit(INPUT_EVENT, val)\n      nextTick(() => {\n        input.value!.checked = checked.value\n      })\n    }\n\n    const switchValue = (): void => {\n      if (switchDisabled.value) return\n\n      const { beforeChange } = props\n      if (!beforeChange) {\n        handleChange()\n        return\n      }\n\n      const shouldChange = beforeChange()\n\n      const isExpectType = [\n        isPromise(shouldChange),\n        isBoolean(shouldChange),\n      ].some((i) => i)\n      if (!isExpectType) {\n        throwError(\n          COMPONENT_NAME,\n          'beforeChange must return type `Promise<boolean>` or `boolean`'\n        )\n      }\n\n      if (isPromise(shouldChange)) {\n        shouldChange\n          .then((result) => {\n            if (result) {\n              handleChange()\n            }\n          })\n          .catch((e) => {\n            debugWarn(COMPONENT_NAME, `some error occurred: ${e}`)\n          })\n      } else if (shouldChange) {\n        handleChange()\n      }\n    }\n\n    const setBackgroundColor = (): void => {\n      const newColor = checked.value ? props.activeColor : props.inactiveColor\n      const coreEl = core.value\n      if (props.borderColor) coreEl!.style.borderColor = props.borderColor\n      else if (!props.borderColor) coreEl!.style.borderColor = newColor\n      coreEl!.style.backgroundColor = newColor\n      ;(coreEl!.children[0] as HTMLDivElement).style.color = newColor\n    }\n\n    const focus = (): void => {\n      input.value?.focus?.()\n    }\n\n    onMounted(() => {\n      if (props.activeColor || props.inactiveColor || props.borderColor) {\n        setBackgroundColor()\n      }\n\n      input.value!.checked = checked.value\n    })\n\n    return {\n      ns,\n      input,\n      core,\n      switchDisabled,\n      checked,\n      switchKls,\n      handleChange,\n      switchValue,\n      focus,\n    }\n  },\n})\n</script>\n"]},"metadata":{},"sourceType":"module"}