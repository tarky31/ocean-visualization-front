{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport { defineComponent, ref, watch, provide, openBlock, createElementBlock, normalizeClass, renderSlot } from 'vue';\nimport '../../../constants/index.mjs';\nimport '../../../hooks/index.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { UPDATE_MODEL_EVENT, CHANGE_EVENT } from '../../../constants/event.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\n\nvar _sfc_main = defineComponent({\n  name: \"ElCollapse\",\n  props: {\n    accordion: Boolean,\n    modelValue: {\n      type: [Array, String, Number],\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  emits: [UPDATE_MODEL_EVENT, CHANGE_EVENT],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n    var ns = useNamespace(\"collapse\");\n    var activeNames = ref([].concat(props.modelValue));\n\n    var setActiveNames = function setActiveNames(_activeNames) {\n      activeNames.value = [].concat(_activeNames);\n      var value = props.accordion ? activeNames.value[0] : activeNames.value;\n      emit(UPDATE_MODEL_EVENT, value);\n      emit(CHANGE_EVENT, value);\n    };\n\n    var handleItemClick = function handleItemClick(name) {\n      if (props.accordion) {\n        setActiveNames((activeNames.value[0] || activeNames.value[0] === 0) && activeNames.value[0] === name ? \"\" : name);\n      } else {\n        var _activeNames = activeNames.value.slice(0);\n\n        var index = _activeNames.indexOf(name);\n\n        if (index > -1) {\n          _activeNames.splice(index, 1);\n        } else {\n          _activeNames.push(name);\n        }\n\n        setActiveNames(_activeNames);\n      }\n    };\n\n    watch(function () {\n      return props.modelValue;\n    }, function () {\n      activeNames.value = [].concat(props.modelValue);\n    }, {\n      deep: true\n    });\n    provide(\"collapse\", {\n      activeNames: activeNames,\n      handleItemClick: handleItemClick\n    });\n    return {\n      ns: ns,\n      activeNames: activeNames,\n      setActiveNames: setActiveNames,\n      handleItemClick: handleItemClick\n    };\n  }\n});\n\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: normalizeClass(_ctx.ns.b()),\n    role: \"tablist\",\n    \"aria-multiselectable\": \"true\"\n  }, [renderSlot(_ctx.$slots, \"default\")], 2);\n}\n\nvar Collapse = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\n\nexport { Collapse as default };","map":{"version":3,"mappings":";;;;;;;;;;;AAYA,IAAKA,YAAaC,gBAAa;AAC7BC,QAAM,YADuB;AAE7BC,SAAO;AACLC,eAAWC,OADN;AAELC,gBAAY;AACVC,YAAM,CAACC,KAAD,EAAQC,MAAR,EAAgBC,MAAhB,CADI;AAIVC,eAAS;AAAA,eAAM,EAAN;AAAA;AAJC;AAFP,GAFsB;AAW7BC,SAAO,CAACC,kBAAD,EAAqBC,YAArB,CAXsB;AAY7BC,OAZ6B,iBAYvBZ,KAZuB,QAYN;AAAA,QAARa,IAAQ,QAARA,IAAQ;AACrB,QAAMC,KAAKC,aAAa,UAAb,CAAX;AACA,QAAMC,cAAcC,IAAI,GAAGC,MAAH,CAAUlB,MAAMG,UAAhB,CAAJ,CAApB;;AAEA,QAAMgB,iBAAiB,SAAjBA,cAAiB,CAACC,YAAD,EAAkB;AACvCJ,kBAAYK,KAAZ,GAAoB,GAAGH,MAAH,CAAUE,YAAV,CAApB;AACA,UAAMC,QAAQrB,MAAMC,SAAN,GAAkBe,YAAYK,KAAZ,CAAkB,CAAlB,CAAlB,GAAyCL,YAAYK,KAAnE;AACAR,WAAKH,kBAAL,EAAyBW,KAAzB;AACAR,WAAKF,YAAL,EAAmBU,KAAnB;AAAmB,KAJrB;;AAOA,QAAMC,kBAAkB,SAAlBA,eAAkB,CAACvB,IAAD,EAAU;AAChC,UAAIC,MAAMC,SAAV,EAAqB;AACnBkB,uBACG,aAAYE,KAAZ,CAAkB,CAAlB,KAAwBL,YAAYK,KAAZ,CAAkB,CAAlB,MAAyB,CAAjD,KACCL,YAAYK,KAAZ,CAAkB,CAAlB,MAAyBtB,IAD1B,GAEG,EAFH,GAGGA,IAJN;AAIM,OALR,MAOO;AACL,YAAMqB,eAAeJ,YAAYK,KAAZ,CAAkBE,KAAlB,CAAwB,CAAxB,CAArB;;AACA,YAAMC,QAAQJ,aAAaK,OAAb,CAAqB1B,IAArB,CAAd;;AAEA,YAAIyB,QAAQ,EAAZ,EAAgB;AACdJ,uBAAaM,MAAb,CAAoBF,KAApB,EAA2B,CAA3B;AAA2B,SAD7B,MAEO;AACLJ,uBAAaO,IAAb,CAAkB5B,IAAlB;AAAkB;;AAEpBoB,uBAAeC,YAAf;AAAe;AAAA,KAjBnB;;AAqBAQ,UACE;AAAA,aAAM5B,MAAMG,UAAZ;AAAA,KADF,EAEE,YAAM;AACJa,kBAAYK,KAAZ,GAAoB,GAAGH,MAAH,CAAUlB,MAAMG,UAAhB,CAApB;AAAoC,KAHxC,EAKE;AACE0B,YAAM;AADR,KALF;AAUAC,YAA0B,UAA1B,EAAsC;AACpCd,8BADoC;AAEpCM;AAFoC,KAAtC;AAKA,WAAO;AACLR,YADK;AAELE,8BAFK;AAGLG,oCAHK;AAILG;AAJK,KAAP;AAIE;AA/DyB,CAAb,CAAlB;;;sBAXES,mBAEM,KAFNA,EAEM;AAFAC,WAAKC,eAAEC,QAAGC,CAAH,EAAFF,CAEL;AAFeG,UAAK,SAEpB;AAF8B,4BAAqB;AAEnD,GAFNL,EAAyD,CACvDM,WAAaH,WAAbG,EAAa,SAAbA,CADuD,CAAzDN,EACe,CADfA","names":["_sfc_main","defineComponent","name","props","accordion","Boolean","modelValue","type","Array","String","Number","default","emits","UPDATE_MODEL_EVENT","CHANGE_EVENT","setup","emit","ns","useNamespace","activeNames","ref","concat","setActiveNames","_activeNames","value","handleItemClick","slice","index","indexOf","splice","push","watch","deep","provide","_createElementBlock","class","_normalizeClass","_ctx","b","role","_renderSlot"],"sources":["../../../../../../packages/components/collapse/src/collapse.vue"],"sourcesContent":["<template>\n  <div :class=\"ns.b()\" role=\"tablist\" aria-multiselectable=\"true\">\n    <slot></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, watch, provide } from 'vue'\nimport { UPDATE_MODEL_EVENT, CHANGE_EVENT } from '@element-plus/constants'\nimport { useNamespace } from '@element-plus/hooks'\nimport type { CollapseProvider } from './collapse.type'\n\nexport default defineComponent({\n  name: 'ElCollapse',\n  props: {\n    accordion: Boolean,\n    modelValue: {\n      type: [Array, String, Number] as PropType<\n        string | number | Array<string | number>\n      >,\n      default: () => [],\n    },\n  },\n  emits: [UPDATE_MODEL_EVENT, CHANGE_EVENT],\n  setup(props, { emit }) {\n    const ns = useNamespace('collapse')\n    const activeNames = ref([].concat(props.modelValue))\n\n    const setActiveNames = (_activeNames) => {\n      activeNames.value = [].concat(_activeNames)\n      const value = props.accordion ? activeNames.value[0] : activeNames.value\n      emit(UPDATE_MODEL_EVENT, value)\n      emit(CHANGE_EVENT, value)\n    }\n\n    const handleItemClick = (name) => {\n      if (props.accordion) {\n        setActiveNames(\n          (activeNames.value[0] || activeNames.value[0] === 0) &&\n            activeNames.value[0] === name\n            ? ''\n            : name\n        )\n      } else {\n        const _activeNames = activeNames.value.slice(0)\n        const index = _activeNames.indexOf(name)\n\n        if (index > -1) {\n          _activeNames.splice(index, 1)\n        } else {\n          _activeNames.push(name)\n        }\n        setActiveNames(_activeNames)\n      }\n    }\n\n    watch(\n      () => props.modelValue,\n      () => {\n        activeNames.value = [].concat(props.modelValue)\n      },\n      {\n        deep: true,\n      }\n    )\n\n    provide<CollapseProvider>('collapse', {\n      activeNames,\n      handleItemClick,\n    })\n\n    return {\n      ns,\n      activeNames,\n      setActiveNames,\n      handleItemClick,\n    }\n  },\n})\n</script>\n"]},"metadata":{},"sourceType":"module"}